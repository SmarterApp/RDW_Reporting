<p-dataTable [value]="exams"
             emptyMessage="{{'messages.noExamsMatchingCriteria' | translate}}"
             sortField="exam.schoolYear"
             sortOrder="-1"
             tableStyleClass="table table-striped table-hover">
  <p-column field="exam.schoolYear" header="{{'labels.student.results.cols.school-year' | translate}}" sortable="true">
    <ng-template let-exam="rowData.exam" pTemplate="body">
      {{ exam.schoolYear | schoolYear }}
    </ng-template>
  </p-column>
  <p-column field="school.name" header="{{'labels.student.results.cols.school' | translate }}" sortable="true"></p-column>
  <p-column field="assessment.name" header="{{'labels.student.results.cols.assessment' | translate}}" sortable="true"></p-column>
  <p-column field="exam.date" header="{{'labels.student.results.cols.date' | translate}}" sortable="true">
    <ng-template let-exam="rowData.exam" pTemplate="body">
      {{ exam.date | date }}
    </ng-template>
  </p-column>
  <p-column field="exam.enrolledGrade" header="{{'labels.student.results.cols.enrolled-grade' | translate}}" sortable="true">
    <ng-template let-exam="rowData.exam" pTemplate="body">
      <!-- TODO once grade codes are returned, pipe through translation -->
      {{ exam.enrolledGrade }}
    </ng-template>
  </p-column>
  <p-column field="exam.administrativeCondition" sortable="true">
    <ng-template pTemplate="header">
      {{'labels.groups.results.assessment.exams.cols.status' | translate}}
      <span class="icon"
            popover="{{'labels.groups.results.assessment.exams.cols.status-info' | translate}}"
            popoverTitle="{{'labels.groups.results.assessment.exams.cols.status' | translate}}"
            triggers="click:mouseleave"
      ><i class="fa fa-info-circle"></i></span>
    </ng-template>
    <ng-template let-exam="rowData.exam" pTemplate="body">
      <span class="label border-only maroon">{{ 'enum.administrative-condition.' + exam.administrativeCondition | translate }}</span>
      <span *ngIf="exam.completeness == 'Partial'" class="label border-only maroon">{{ 'enum.completeness.Partial' | translate }}</span>
    </ng-template>
  </p-column>
  <p-column field="exam.level" sortable="true">
    <ng-template pTemplate="header">
      {{'labels.groups.results.assessment.exams.cols.iab.performance' | translate}}
      <span class="icon"
            popover="{{'labels.groups.results.assessment.exams.cols.iab.performance-info' | translate}}"
            popoverTitle="{{'labels.groups.results.assessment.exams.cols.iab.performance' | translate}}"
            triggers="click:mouseleave"
      ><i class="fa fa-info-circle"></i></span>
    </ng-template>
    <ng-template let-exam="rowData.exam" pTemplate="body">
      {{ 'enum.iab-category.' + exam.level.toString() | translate }}
    </ng-template>
  </p-column>
  <p-column field="exam.score" sortable="true">
    <ng-template pTemplate="header">
      {{'labels.groups.results.assessment.exams.cols.score' | translate}}
      <span class="icon"
            popover="{{'labels.groups.results.assessment.exams.cols.score-info' | translate}}"
            popoverTitle="{{'labels.groups.results.assessment.exams.cols.score' | translate}}"
            triggers="click:mouseleave"
      ><i class="fa fa-info-circle"></i></span>
    </ng-template>
    <ng-template let-exam="rowData.exam" pTemplate="body">
      <scale-score [score]="exam.score" [standardError]="exam.standardError"></scale-score>
    </ng-template>
  </p-column>
</p-dataTable>
