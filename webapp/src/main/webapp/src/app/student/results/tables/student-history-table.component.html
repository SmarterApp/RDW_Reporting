<!-- Table Display State Toggle -->
<div class="mb-sm clearfix"></div>

<div class="card-grid">
  <ng-container *ngFor="let row of rows; let i = index">
    <div class="row">
      <div class="col-md-4 mb-md" *ngFor="let studentHistoryCard of row">
        <student-assessment-card
          *ngIf="studentHistoryCard.exam"
          [latestExam]="studentHistoryCard"
          [exams]="exams"
          (selectedAssessment)="onCardSelection($event)"
        ></student-assessment-card>
      </div>
    </div>
    <div *ngIf="selectedCardRowIndex === i" class="row">
      <div class="col-md-12 mb-md">
        <div class="mb-sm">
          <sb-radio-group
            *ngIf="scoreTypeOptions != null && scoreTypeOptions.length > 1"
            [options]="scoreTypeOptions"
            [(ngModel)]="scoreType"
            id="score-type"
            buttonGroupStyles="btn-group-sm"
            buttonStyles="btn-default"
            analyticsCategory="AssessmentResults"
            analyticsEvent="ChangeScoreView"
          ></sb-radio-group>
        </div>

        <student-exam-table
          [exams]="exams"
          [student]="student"
          [subjectDefinition]="subjectDefinition"
          [minimumItemDataYear]="minimumItemDataYear"
          [scoreType]="scoreType"
        ></student-exam-table>
      </div>
    </div>
  </ng-container>
</div>
