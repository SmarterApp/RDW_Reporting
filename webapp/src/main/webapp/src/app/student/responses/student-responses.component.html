<div class="mb-md">
  <div class="tag tag-lg blue ">
    <span class="label">{{'labels.student.name' | translate:student}}</span>
    <span>{{student.ssid}}</span>
  </div>
</div>

<h3 class="blue mb-md">{{'labels.student.responses.title' | translate}}</h3>

<div class="well">
  <div class="mb-md">
    <div class="flex-children">
      <div class="flex-child">
        <span class="tag tag-md {{colorService.getColor(getGradeIndex(assessment.grade))}}">
          <span class="label">{{assessment.grade | gradeDisplay}}</span>
          <span>{{assessment.name}}</span>
        </span>
      </div>
      <div class="flex-child ml-auto">
        <span class="gray-darker">
          <i class="fa fa-calendar"></i>
          {{exam.date | date}}
        </span>
      </div>
    </div>
  </div>

  <p-dataTable [value]="assessmentItems"
               emptyMessage="{{'messages.noExamsMatchingCriteria' | translate}}"
               sortField="assessmentItem.scores.0.position"
               tableStyleClass="table table-striped table-hover"
               rowExpandMode="single"
               expandableRows="true">
    <p-column expander="true" ></p-column>

    <p-column field="assessmentItem.scores.0.position" header="{{'labels.groups.results.assessment.items.cols.number' | translate}}" sortable="true"></p-column>
    <p-column field="assessmentItem.claimTarget" [sortable]="true">
      <ng-template pTemplate="header">
              <span info-label title="{{'labels.groups.results.assessment.items.cols.claim' | translate}}"
                    content="{{'labels.groups.results.assessment.items.cols.claim-info' | translate}}"></span>
      </ng-template>
      <ng-template let-item="rowData.assessmentItem" pTemplate="body">
        {{ 'definition.claim.' + item.claim + '.name' | translate }} / {{ 'labels.groups.results.assessment.items.target' | translate:item }}
      </ng-template>
    </p-column>
    <p-column field="assessmentItem.difficulty" [sortable]="true">
      <ng-template pTemplate="header">
              <span info-label title="{{'labels.groups.results.assessment.items.cols.difficulty' | translate}}"
                    content="{{'labels.groups.results.assessment.items.cols.difficulty-info' | translate}}"></span>
      </ng-template>
      <ng-template let-item="rowData.assessmentItem" pTemplate="body">
        {{ 'enum.difficulty.' + item.difficulty | translate }}
      </ng-template>
    </p-column>
    <p-column field="assessmentItem.commonCoreStandardIds" header="{{'labels.student.responses.cols.standard' | translate}}" sortable="true">
      <ng-template let-standards="rowData.assessmentItem.commonCoreStandardIds" pTemplate="body">
        <span *ngFor="let standard of standards" class="label border-only blue">{{standard}}</span>
      </ng-template>
    </p-column>
    <p-column field="assessmentItem.scores.0.points" header="{{'labels.student.responses.cols.student-score' | translate}}" sortable="true"></p-column>
    <p-column field="assessmentItem.maxPoints" header="{{'labels.student.responses.cols.max-score' | translate}}" sortable="true"></p-column>
    <p-column field="correctness" sortable="true">
      <ng-template pTemplate="header">
              <span info-label title="{{'labels.student.responses.cols.correctness' | translate}}"
                    content="{{'labels.student.responses.cols.correctness-info' | translate}}"></span>
      </ng-template>
      <ng-template let-correctness="rowData.correctness" pTemplate="body">
        {{ correctness | number:'1.2-2' }}
      </ng-template>
    </p-column>
    <ng-template let-item pTemplate="rowexpansion">
      <item-tab [item]="item.assessmentItem"
                [response]="item.assessmentItem.scores[0].response"
                [position]="item.assessmentItem.scores[0].position"
                [showItemDetails]="assessment.isInterim"
                [showStudentScores]="false"></item-tab>
    </ng-template>
  </p-dataTable>
</div>

