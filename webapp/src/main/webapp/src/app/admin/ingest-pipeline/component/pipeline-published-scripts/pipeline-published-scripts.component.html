<div class="head">
  <h3>
    {{
      'pipeline-publishing-history.heading'
        | translate
          : {
              pipelineName:
                'ingest-pipeline.' + pipeline.code + '.name' | translate
            }
    }}
  </h3>
  <button
    type="button"
    class="close fa-3x"
    title="{{ 'common.action.close' | translate }}"
    [routerLink]="['..']"
  >
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<ng-container *ngIf="pipelines.length > 0; else noScripts">
  <div class="body">
    <div class="scripts-container">
      <ul>
        <li *ngFor="let published of pipelines">
          <pipeline-item
            [active]="published === selectedPipeline"
            (click)="pipelineSelect.emit(published)"
          >
            <div name>
              {{ published.publishedOn | date: 'medium' }}
            </div>
            <div caption>
              <div>
                {{ 'pipeline-item.published-by' | translate: pipeline }}
              </div>
              <div
                *ngIf="published.active"
                class="label border-only blue published-tag"
              >
                {{ 'pipeline-publish-state.Published' | translate }}
              </div>
            </div>
          </pipeline-item>
        </li>
      </ul>
    </div>
    <ng-container *ngFor="let published of pipelines">
      <code-editor
        [hidden]="published !== selectedPipeline"
        [language]="published.userScripts[0].language"
        [ngModel]="published.userScripts[0].body"
        [readonly]="true"
      ></code-editor>
    </ng-container>
  </div>
</ng-container>
<ng-template #noScripts>
  <div class="text-center">
    {{ 'pipeline-published-scripts.no-scripts' | translate }}
  </div>
</ng-template>
