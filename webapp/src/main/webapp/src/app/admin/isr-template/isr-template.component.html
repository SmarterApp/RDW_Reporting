<page-heading>
  <h1 class="h2" heading>{{ 'isr-template.title' | translate }}</h1>
</page-heading>

<ng-container>
  <ng-container>
    <div class="well well-results">
      <div class="table-list-container">
        <p-table
          [columns]="columns"
          [value]="isrTemplates"
          sortField="name"
          [autoLayout]="true"
        >
          <ng-template pTemplate="header" let-columns>
            <tr>
              <th
                *ngFor="let column of columns"
                [pSortableColumn]="column.field"
                [pSortableColumnDisabled]="!column.sortable"
                [ngSwitch]="column.id"
              >
                <span *ngSwitchDefault>
                  {{ 'isr-template.columns.' + column.id | translate }}
                </span>

                <p-sortIcon
                  *ngIf="column.sortable"
                  [field]="column.field"
                ></p-sortIcon>
              </th>
              <th>
                <a
                  href="/assets/template/reference-template.pdf"
                  download="/assets/template/reference-template.pdf"
                  title="{{ 'isr-template.reference-template' | translate }}"
                  ><i class="fa fa-cloud-download" aria-hidden="true"></i>
                  {{ 'isr-template.reference-template' | translate }}</a
                >
              </th>
            </tr>
          </ng-template>

          <ng-template
            pTemplate="body"
            let-group
            let-rowData
            let-columns="columns"
          >
            <tr>
              <td *ngFor="let column of columns" [ngSwitch]="column.id">
                <span *ngSwitchDefault>
                  {{ group[column.field] }}
                </span>
                <span *ngSwitchCase="'status'" [ngClass]="getStatus(rowData)">
                  {{ group[column.field] }}
                </span>
              </td>
              <td [ngClass]="displayDownload(rowData)">
                <a>
                  <i
                    class="fa fa-cloud-upload"
                    aria-hidden="true"
                    title="Upload New Template"
                  ></i>
                </a>

                <a
                  href="/assets/template/test-template.csv"
                  download="/assets/template/test-template.csv"
                  title="{{ 'isr-template.reference-template' | translate }}"
                  [ngClass]="displayDownload(rowData)"
                  ><i
                    class="fa fa-cloud-download"
                    aria-hidden="true"
                    title="Download Current Template"
                  ></i>
                </a>

                <a
                  [ngClass]="displayDownload(rowData)"
                  ng-disabled="rowData.uploadDate == null"
                  ><i
                    class="fa fa-ban"
                    aria-hidden="true"
                    title="Remove Current Template"
                  ></i>
                </a>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage" let-columns>
            <tr>
              <td [attr.colspan]="columns.length">
                {{ 'isr-template.empty-message' | translate }}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </ng-container>
</ng-container>
