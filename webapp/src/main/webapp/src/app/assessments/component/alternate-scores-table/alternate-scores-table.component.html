<p-table [columns]="columns" [value]="rows" [autoLayout]="true">
  <ng-template pTemplate="header" let-columns>
    <tr>
      <th
        *ngFor="let column of columns; let index = index"
        [pSortableColumn]="column.sortField"
        [ngSwitch]="column.id"
        [pSortableColumnDisabled]="true"
      >
        <div *ngSwitchCase="'performanceLevel'">
          {{
            'alternate-scores-table.column.' + column.id + '.heading'
              | translate
          }}
        </div>
        <div *ngSwitchDefault>
          <!--{{-->
          <!--'alternate-scores-table.column.score.heading'-->
          <!--| translate: {value: column.scoreNumber}-->
          <!--}}-->
          <i
            class="fa {{
              'subject.' +
                _subjectDefinition.subject +
                '.alt.' +
                column.scoreCode +
                '.icon' | translate
            }}"
          ></i
          >{{
            'subject.' +
              _subjectDefinition.subject +
              '.alt.' +
              column.scoreCode +
              '.name' | translate
          }}
          <br />
          <scale-score [score]="2200" [standardError]="15"></scale-score>
        </div>
      </th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-row let-columns="columns">
    <tr>
      <td
        *ngFor="let column of columns"
        [ngSwitch]="column.id"
        class="{{ column.id }}"
      >
        <ng-container *ngSwitchCase="'performanceLevel'">
          {{
            'subject.' +
              _subjectDefinition.subject +
              '.asmt-type.' +
              _subjectDefinition.assessmentType +
              '.level.' +
              row[column.field] +
              '.name' | translate
          }}
        </ng-container>
        <ng-container *ngSwitchDefault>
          <div class="percentage-graph">
            <div class="percentage-container">
              {{ row[column.field].percent | number: '1.0-0' }}%
            </div>
            <div
              class="percentage-bar-container level-down scale-score-graph rounded blend-middle gray-lightest grid-item"
            >
              <div class="bar-container">
                <div
                  *ngIf="row[column.field].value != 0"
                  class="bar"
                  [ngClass]="
                    'subject.' +
                      _subjectDefinition.subject +
                      '.asmt-type.' +
                      _subjectDefinition.assessmentType +
                      '.level.' +
                      row.performanceLevel +
                      '.color' | translate
                  "
                  [attr.data-width]="row[column.field].percent"
                ></div>
                <div
                  *ngIf="row[column.field].percent < 100"
                  class="bar gray"
                  [attr.data-width]="100 - row[column.field].percent"
                ></div>
              </div>
            </div>
          </div>
        </ng-container>
      </td>
    </tr>
  </ng-template>
</p-table>
