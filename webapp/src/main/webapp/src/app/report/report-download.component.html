<div *ngIf="options" class="report-download-container">

  <button class="btn btn-sm btn-default"
          [containerClass]="'report-download-popover'"
          [popover]="popoverTemplate"><i class="fa fa-cloud-download" aria-hidden="true"></i>
    {{'labels.reports.download-report' | translate}}
  </button>

  <template #popoverTemplate>
    <form #form="ngForm" (ngSubmit)="submit()">
      <div class="form-group">

        <label>{{'labels.reports.assessment-type' | translate}}
          <select class="form-control" name="assessment-type" [(ngModel)]="options.assessmentType">
            <option *ngFor="let type of assessmentTypes" [ngValue]="type">{{'labels.assessmentTypes.' + type + '.short-name' | translate}}
            </option>
          </select>
        </label>

        <label class="ml-xs">{{'labels.reports.subject' | translate}}
          <select class="form-control" name="subject" [(ngModel)]="options.subject">
            <option *ngFor="let subject of subjectTypes" [ngValue]="subject">{{'labels.subjects.' + subject + '.short-name' | translate}}
            </option>
          </select>
        </label>

        <label class="ml-xs">{{'labels.reports.school-year' | translate}}
          <select class="form-control" name="school-year" [(ngModel)]="options.schoolYear">
            <option *ngFor="let year of schoolYears" [ngValue]="year">{{year | schoolYear}}</option>
          </select>
        </label>

        <label class="ml-xs">
          <button class="btn btn-info" (click)="form.ngSubmit.emit()">{{'labels.reports.download' | translate}}</button>
        </label>

      </div>
    </form>

  </template>
</div>
