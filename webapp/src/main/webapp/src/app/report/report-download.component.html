<span *ngIf="options" class="report-download-container">

  <button class="btn btn-sm btn-default"
          (onShown)="onShownInternal($event)"
          #downloadPopover="bs-popover"
          containerClass="report-download-popover"
          placement="bottom"
          outsideClick="true"
          [popover]="popoverTemplate"><i class="fa fa-cloud-download" aria-hidden="true"></i> {{buttonLabel | translate}}</button>

  <template #popoverTemplate>
    <form #form="ngForm" (ngSubmit)="submit()">
      <div class="form-group">
        <label for="assessment-type-select">{{'labels.reports.form.assessment-type' | translate}}</label>
        <select id="assessment-type-select" class="form-control input-sm" name="assessment-type" [(ngModel)]="options.assessmentType">
          <option *ngFor="let type of assessmentTypes" [ngValue]="type">{{(type != null ? 'labels.assessmentTypes.' + type + '.short-name' : 'buttons.all') | translate}}</option>
        </select>
      </div>
      <div class="form-group mt-sm">
        <label for="subject-select">{{'labels.reports.form.subject' | translate}}</label>
        <select id="subject-select" class="form-control input-sm" name="subject" [(ngModel)]="options.subject">
          <option *ngFor="let subject of subjectTypes" [ngValue]="subject">{{(subject != null ? 'labels.subjects.' + subject + '.short-name' : 'buttons.all') | translate}}</option>
        </select>
      </div>
      <div class="form-group mt-sm" *ngIf="displayOrder">
        <label for="order-select">{{'labels.reports.form.order' | translate}}</label>
        <select id="order-select" class="form-control input-sm" name="order" [(ngModel)]="options.order">
          <option *ngFor="let order of orders" [ngValue]="order">{{'labels.reports.orders.' + order | translate}}</option>
        </select>
      </div>
      <div class="form-group mt-sm">
          <button type="submit" class="btn btn-info btn-sm btn-block">{{'labels.reports.form.submit' | translate}}</button>
      </div>
    </form>
  </template>
</span>
