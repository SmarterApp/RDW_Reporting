<div class="panel panel-default">
  <div class="panel-body">
    <div class="pull-right">
      <a href="" class="spacer-h-sm"><i class="fa fa-list-alt"></i> {{'labels.assessment.instruct' | translate }}</a>
      <button class="btn btn-default btn-sm" (click)="collapsed = !collapsed">
          <i class="fa font-bold" [ngClass]="{'fa-angle-down':collapsed, 'fa-angle-up':!collapsed}"></i>
      </button>
    </div>
    <h4 class="spacer-v-md">
      <span class="label bg-color-grade-{{assessmentExam.assessment.grade}} pad-v-lg spacer-h-sm">
        {{'labels.groups.results.grade-prefix' | translate}}{{assessmentExam.assessment.grade}}
      </span>
      <span class="color-grade-{{assessmentExam.assessment.grade}} spacer-h-md"> {{assessmentExam.assessment.name}}</span>
    </h4>

      <div *ngIf="exams.length > 0" class="pull-right" style="width:250px;">
        <!--TODO: Implement visualization-->
        <div title="{{statistics.average}}">Average: {{ statistics.average | number:'1.0-0' | removeComma }}</div>
        <div title="{{performance.belowStandard}}">Below Standard: {{ performance.belowStandard | number:'1.0-0' }} </div>
        <div title="{{performance.nearStandard}}">Near Standard: {{ performance.nearStandard | number:'1.0-0' }}</div>
        <div title="{{performance.aboveStandard}}">Above Standard: {{ performance.aboveStandard  | number:'1.0-0' }} </div>
      </div>
      <div class="spacer-v-lg">
        <strong>{{'labels.assessment.sessions-title' | translate}}</strong>
        <div class="spacer-v-sm">{{'labels.assessment.sessions-instruct' | translate}}</div>
        <button *ngFor="let session of sessions" class="btn btn-gray spacer-h-sm" (click)="toggleSession(session)" [ngClass]="{'active':session.filter}">
          <strong class="spacer-h-sm">{{session.date | date }}</strong>
          <i class="fa fa-minus-square" [ngClass]="{'fa-minus-square':session.filter, 'fa-plus-square':!session.filter }"></i>
          <div> {{session.id || 'labels.groups.results.session-unknown' | translate }}</div>
        </button>
      </div>
    <div *ngIf="!collapsed" @fadeAnimation>
      <div class="spacer-v-md">
        <div class="pull-right"><button class="btn btn-default btn-sm">
          {{'labels.assessment.button-item-points' | translate}}
          <i class="fa fa-angle-right"></i></button></div>
        <h4>{{'labels.assessment.exam-results' | translate}}</h4>
      </div>

      <p-dataTable [value]="exams">
        <p-column field="studentName" header="{{'labels.groups.results.exam-cols.name' | translate}}" [sortable]="true"></p-column>
        <p-column field="date" header="{{'labels.groups.results.exam-cols.date' | translate}}" [sortable]="true">
          <ng-template let-examSession="rowData" pTemplate="body">
            {{ examSession.date | date }}
          </ng-template>
        </p-column>
        <p-column field="session" header="{{'labels.groups.results.exam-cols.session' | translate}}" [sortable]="true"></p-column>
        <p-column field="enrolledGrade" header="{{'labels.groups.results.exam-cols.grade' | translate}}" [sortable]="true" ></p-column>
        <p-column field="score" header="{{'labels.groups.results.exam-cols.score' | translate}}" [sortable]="true"></p-column>
      </p-dataTable>
    </div>

  </div>
</div>
