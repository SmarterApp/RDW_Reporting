<h2 class="h3 blue-dark">{{report.label}}</h2>

<ng-container *ngIf="loading">
  <spinner></spinner>
</ng-container>

<ng-container *ngIf="!reportSizeSupported">
  <div class="well">
    <p>{{'aggregate-report.unsupported-size-error' | translate}}</p>
    <div class="mb-sm">
      <button class="btn btn-default btn-sm" (click)="onUpdateRequestButtonClick()">
        <i class="fa fa-chevron-left mr-xs"></i>{{'aggregate-report.update-request' | translate}}
      </button>
    </div>
  </div>

</ng-container>

<ng-container *ngIf="!loading">

  <div class="mb-sm">
    <button class="btn btn-default btn-sm" (click)="onUpdateRequestButtonClick()">
      <i class="fa fa-chevron-left mr-xs"></i>{{'aggregate-report.update-request' | translate}}
    </button>
  </div>

  <div *ngFor="let table of reportTables" class="well">

    <h3 class="h3 label-group green">
      <span class="label">{{'common.assessment-type.' + report.request.assessmentTypeCode + '.short-name' | translate}}</span><span class="label">{{'common.subject.' + table.subjectCode + '.short-name' | translate}}</span>
    </h3>

    <div class="mt-xs">
      <aggregate-report-table [table]="table"
                              [query]="report.request"
                              [showValuesAsPercent]="true"
                              [groupPerformanceLevels]="false"
                              [columnOrdering]="['organizationName', 'gradeId', 'schoolYear', 'dimensionValue']"></aggregate-report-table>
    </div>
  </div>
</ng-container>
