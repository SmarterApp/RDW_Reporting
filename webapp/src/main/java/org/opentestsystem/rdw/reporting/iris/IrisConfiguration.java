package org.opentestsystem.rdw.reporting.iris;

import org.springframework.cloud.netflix.zuul.filters.pre.FormBodyWrapperFilter;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Primary;
import org.springframework.core.annotation.Order;

@Configuration
public class IrisConfiguration {

    /**
     * Overwrite the standard Zuul FormBodyWrapperFilter with one
     * able to deal with Iris.
     *
     * @return An Iris-capable FormBodyWrapperFilter bean
     */
    @Bean
    @Order(10)
    @Primary
    public FormBodyWrapperFilter formBodyWrapperFilter() {
        return new IrisAwareFormBodyWrapperFilter();
    }

    @Bean
    public IrisAwareContentTypeResponseFilter contentTypeResponseFilter() {
        return new IrisAwareContentTypeResponseFilter();
    }

}
