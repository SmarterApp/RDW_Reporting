package org.opentestsystem.rdw.reporting.exam;

import org.opentestsystem.rdw.reporting.security.GroupGrant;
import org.opentestsystem.rdw.reporting.security.User;
import org.springframework.security.access.prepost.PreAuthorize;

import javax.validation.constraints.NotNull;
import java.util.Optional;

/**
 * Service responsible for managing group exams
 */
public interface GroupExamService {

    /**
     * Gets the most recent {@link GroupExam} for the given user and group.
     * This method makes sure that the group belongs to the user before executing.
     *
     * @param user the {@link User} accessing the group information
     * @param groupId the {@link GroupGrant#getId()} for the group information being accessed
     * @return the most recent GroupExam
     */
    @PreAuthorize("#user.getGroupsById().containsKey(#groupId)")
    Optional<GroupExam> getLatestGroupExam(@NotNull User user, long groupId);

}
