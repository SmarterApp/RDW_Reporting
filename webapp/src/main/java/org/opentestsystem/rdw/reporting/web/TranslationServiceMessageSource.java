package org.opentestsystem.rdw.reporting.web;

import org.opentestsystem.rdw.reporting.service.TranslationService;
import org.springframework.context.support.AbstractMessageSource;

import javax.validation.constraints.NotNull;
import java.text.MessageFormat;
import java.util.Locale;
import java.util.Map;

public class TranslationServiceMessageSource extends AbstractMessageSource {

    private TranslationService service;

    public TranslationServiceMessageSource(final @NotNull TranslationService service) {
        this.service = service;
    }

    @Override
    protected MessageFormat resolveCode(String code, Locale locale) {
        final Map<String, String> messages = service.getTranslationsForLocale(locale);
        final String message = messages.get(code);
        if (message != null) {
            return new MessageFormat(message, locale);
        }
        return null;
    }

}