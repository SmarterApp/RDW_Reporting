package org.opentestsystem.rdw.reporting.search.exam.student;

import org.opentestsystem.rdw.reporting.search.exam.GroupExamItemScores;
import org.opentestsystem.rdw.reporting.security.User;
import org.springframework.security.core.annotation.AuthenticationPrincipal;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;

/**
 * This controller is responsible for providing assessment items and student
 * responses/scores within the context of a single exam.
 */
@RestController
class StudentExamItemController {

    private final ExamItemService examItemService;

    public StudentExamItemController(final ExamItemService examItemService) {
        this.examItemService = examItemService;
    }

    @GetMapping("/api/students/{studentId}/exams/{examId}/examitems")
    public GroupExamItemScores getExamItemScores(
            @AuthenticationPrincipal final User user,
            @PathVariable final long examId) {

        return examItemService.getExamItems(user, examId);
    }
}
