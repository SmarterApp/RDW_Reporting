package org.opentestsystem.rdw.reporting.processor.stream;

import org.springframework.cloud.stream.annotation.Input;
import org.springframework.cloud.stream.annotation.Output;
import org.springframework.messaging.MessageChannel;
import org.springframework.messaging.SubscribableChannel;

import static org.opentestsystem.rdw.reporting.processor.stream.FetchStudentsProcessor.REPORT_GENERATE_FOR_STUDENTS;

/**
 * This processor is responsible for receiving student chunk messages,
 * generating a PDF for each chunk received, and publishing a single
 * report collation message once the last chunk has been processed.
 */
public interface GenerateStudentsReportProcessor {

    String REPORT_COLLATE = "REPORT_COLLATE";

    @Input(REPORT_GENERATE_FOR_STUDENTS)
    SubscribableChannel generateStudentReport();

    @Output(REPORT_COLLATE)
    MessageChannel collateStudentReportsOutput();

}
