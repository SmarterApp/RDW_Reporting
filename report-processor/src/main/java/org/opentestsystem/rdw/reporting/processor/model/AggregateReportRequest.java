package org.opentestsystem.rdw.reporting.processor.model;

import org.opentestsystem.rdw.reporting.common.model.AggregateQuery;

/**
 * This class represents a basic aggregate report request.
 * TODO: How to get subject(s) and schoolyear(s) out of generic AggregateQuery? Should we?
 */
public class AggregateReportRequest extends AbstractExamReportRequest<PrintOptions> {

    private AggregateQuery query;

    @Override
    public ReportType getReportType() {
        return ReportType.AggregateReportRequest;
    }

    @Override
    public String getReportTypeDisplayValue() {
        return getReportType().name() + " " + (query == null ? "null" : query.getReportType());
    }

    public AggregateQuery getQuery() {
        return query;
    }

    public static Builder builder() {
        return new Builder();
    }

    public static class Builder extends AbstractExamReportRequest.Builder<PrintOptions, AggregateReportRequest, Builder> {
        private AggregateQuery query;

        public AggregateReportRequest build() {
            final AggregateReportRequest request = super.build(new AggregateReportRequest());
            request.query = query;

            return request;
        }

        public Builder copy(final AggregateReportRequest request) {
            super.copy(this, request);
            this.query = request.query;
            return this;
        }

        public Builder query(final AggregateQuery query) {
            this.query = query;
            return this;
        }
    }
}
