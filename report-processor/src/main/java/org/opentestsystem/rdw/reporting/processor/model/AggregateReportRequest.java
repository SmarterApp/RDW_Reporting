package org.opentestsystem.rdw.reporting.processor.model;

import org.opentestsystem.rdw.reporting.common.model.AggregateQuery;
import org.opentestsystem.rdw.reporting.common.model.ReportQuery;

/**
 * This class represents a basic aggregate report request.
 * TODO: How to get subject(s) and schoolyear(s) out of generic AggregateQuery? Should we?
 * @deprecated use {@link AggregateQuery}
 */
public class AggregateReportRequest extends AbstractExamReportRequest {

    private ReportQuery query;

    @Override
    public ReportType getReportType() {
        return ReportType.AggregateReportRequest;
    }

    @Override
    public String getReportTypeDisplayValue() {
        return query.getType().name();
    }

    public ReportQuery getQuery() {
        return query;
    }

    public static Builder builder() {
        return new Builder();
    }

    public static class Builder extends AbstractExamReportRequest.Builder<AggregateReportRequest, Builder> {
        private ReportQuery query;

        public AggregateReportRequest build() {
            final AggregateReportRequest request = super.build(new AggregateReportRequest());
            request.query = query;
            return request;
        }

        public Builder copy(final AggregateReportRequest request) {
            super.copy(this, request);
            this.query = request.query;
            return this;
        }

        public Builder query(final AggregateQuery query) {
            this.query = query;
            return this;
        }
    }
}
