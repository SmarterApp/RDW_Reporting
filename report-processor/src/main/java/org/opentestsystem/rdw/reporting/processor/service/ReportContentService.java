package org.opentestsystem.rdw.reporting.processor.service;

import org.opentestsystem.rdw.reporting.common.model.Report;
import org.opentestsystem.rdw.reporting.processor.web.ReportContentResource;
import org.springframework.http.MediaType;

import java.io.InputStream;
import java.util.Collection;

/**
 * Implementations of this interface are responsible for persisting and
 * reading {@link Report} content bytes.
 */
public interface ReportContentService {

    /**
     * Write report contents into persistent storage.
     * Update the report with content location URI.
     *
     * @param report        The report
     * @param content       The report contents
     * @param contentLength The report content length in bytes
     * @param mediaType     The report content MediaType
     * @return The Report with persisted content location URI.
     */
    Report writeContent(Report report,
                        InputStream content,
                        long contentLength,
                        MediaType mediaType);

    /**
     * Read report contents from persistent storage.
     *
     * @param report    The report
     * @return The report contents
     */
    ReportContentResource openContent(Report report);

    /**
     * Delete a collection of report contents from persistent storage.
     * @param reports The collection of report contents to delete
     */
    void deleteContents(Collection<Report> reports);

    /**
     * Delete a reprot from persistent storage
     * @param report The report to delete
     */
    void deleteContent(Report report);
}
