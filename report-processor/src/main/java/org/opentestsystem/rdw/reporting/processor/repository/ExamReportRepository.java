package org.opentestsystem.rdw.reporting.processor.repository;

import org.opentestsystem.rdw.common.model.Subject;
import org.opentestsystem.rdw.reporting.common.web.security.User;
import org.opentestsystem.rdw.reporting.processor.model.AbstractExamReport;
import org.opentestsystem.rdw.reporting.processor.model.ExamQueryParams;

import javax.validation.constraints.NotNull;
import java.util.Collection;
import java.util.Map;

public interface ExamReportRepository<T extends AbstractExamReport> {

    /**
     * Find all exams for students by school id and school year.
     *
     * @param user            The user
     * @param studentIds      The student ids
     * @param examQueryParams The request filter
     * @return Exams for each student id, mapped by subject; If the {@link ExamQueryParams} includes a student group id
     * and {@link User} does not have access to the group, it returns an empty map.
     */
    Map<Long, Map<Subject, T>> findAllForStudentsByExamFilter(@NotNull User user,
                                                              Collection<Long> studentIds,
                                                              ExamQueryParams examQueryParams);
}
