package org.opentestsystem.rdw.reporting.processor.model;

import org.opentestsystem.rdw.reporting.common.model.Student;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

/**
 * This message model represents a request to generate a report for an
 * ordered chunk of students.
 */
public class ProcessStudentChunkMessage extends ReportRequestMessage {

    private int index;
    private List<Student> students;

    /**
     * @return The chunk ordering index
     */
    public int getIndex() {
        return index;
    }

    /**
     * @return The students within this chunk
     */
    public List<Student> getStudents() {
        return students;
    }

    public static Builder builder() {
        return new Builder();
    }

    public static class Builder extends ReportRequestMessage.BaseBuilder<ProcessStudentChunkMessage, ProcessStudentChunkMessage.Builder> {

        private int index;
        private List<Student> students;

        @Override
        protected ProcessStudentChunkMessage createInstance() {
            return new ProcessStudentChunkMessage();
        }

        public ProcessStudentChunkMessage build() {
            final ProcessStudentChunkMessage message = super.build();
            message.index = index;
            message.students = students == null ? Collections.emptyList() : new ArrayList<>(students);
            return message;
        }

        public Builder index(final int index) {
            this.index = index;
            return this;
        }

        public Builder students(final List<Student> students) {
            this.students = students;
            return this;
        }
    }
}
