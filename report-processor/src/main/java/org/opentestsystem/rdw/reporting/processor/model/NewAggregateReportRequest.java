package org.opentestsystem.rdw.reporting.processor.model;

import org.opentestsystem.rdw.reporting.common.model.AggregateQuery;

/**
 * This class represents a basic aggregate report request.
 * TODO: How to get subject(s) and schoolyear(s) out of generic AggregateQuery? Should we?
 * TODO: This will replace the existing AggregateReportRequest once the feature is fully implemented.
 */
public class NewAggregateReportRequest extends AbstractExamReportRequest<PrintOptions> {

    private AggregateQuery query;

    @Override
    public ReportType getReportType() {
        return ReportType.AggregateReportRequest;
    }

    public AggregateQuery getQuery() {
        return query;
    }

    public static Builder builder() {
        return new Builder();
    }

    public static class Builder extends AbstractExamReportRequest.Builder<PrintOptions, NewAggregateReportRequest, Builder> {
        private AggregateQuery query;

        public NewAggregateReportRequest build() {
            final NewAggregateReportRequest request = super.build(new NewAggregateReportRequest());
            request.query = query;

            return request;
        }

        public Builder copy(final NewAggregateReportRequest request) {
            super.copy(this, request);
            this.query = request.query;
            return this;
        }

        public Builder query(final AggregateQuery query) {
            this.query = query;
            return this;
        }
    }
}
