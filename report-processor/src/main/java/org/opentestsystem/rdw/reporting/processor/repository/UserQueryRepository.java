package org.opentestsystem.rdw.reporting.processor.repository;

import org.opentestsystem.rdw.reporting.processor.model.UserQuery;

import javax.validation.constraints.NotNull;
import java.util.List;

/**
 * Repository responsible for managing user report queries
 */
public interface UserQueryRepository {

    /**
     * Finds all queries associated with the user
     *
     * @param username The user
     * @return All queries associated with the user
     */
    List<UserQuery> findAllByUser(String username);

    /**
     * Finds a query by username and ID.
     * The username and ID must match a record for the operation to succeed
     *
     * @param username The user ID
     * @param id The query ID
     * @return The found query or null if absent.
     */
    UserQuery findByUserAndId(String username, long id);

    /**
     * Stores a user query in the repository
     * The query user and ID must match a record for the operation to succeed
     *
     * @param query The query to store
     * @return The stored query including creation-time generated properties
     */
    UserQuery create(@NotNull UserQuery query);

    /**
     * Updates a user query in the repository
     * The query user and ID must match a record for the operation to succeed
     *
     * @param query The query update
     * @return The updated query
     */
    UserQuery update(@NotNull UserQuery query);

    /**
     * Removes a query from the store.
     * The username and ID must match a record for the operation to succeed
     *
     * @param username The user ID
     * @param id The query ID
     */
    void deleteByUserAndId(String username, long id);

}
