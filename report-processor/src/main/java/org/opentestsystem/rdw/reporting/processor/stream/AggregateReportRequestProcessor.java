package org.opentestsystem.rdw.reporting.processor.stream;

import org.springframework.cloud.stream.annotation.Input;
import org.springframework.cloud.stream.annotation.Output;
import org.springframework.messaging.MessageChannel;

import static org.opentestsystem.rdw.reporting.processor.stream.AggregateReportsSource.AggregateReports;

/**
 * This processor accepts local aggregate report requests and submits requests to an external service
 * for processing.
 * Once complete, the external service publishes responses to the aggregate response channel.
 */
public interface AggregateReportRequestProcessor {

    String AggregateRequest = "AggregateRequest";
    String AggregateResponse = "AggregateResponse";

    /**
     * @return Internal processing initial channel
     */
    @Input(AggregateReports)
    MessageChannel aggregateReports();

    /**
     * @return External processing submission channel
     */
    @Output(AggregateRequest)
    MessageChannel aggregateRequest();

    /**
     * @return External processing results channel
     */
    @Input(AggregateResponse)
    MessageChannel aggregateResponse();
}
