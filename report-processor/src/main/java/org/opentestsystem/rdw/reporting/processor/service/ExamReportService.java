package org.opentestsystem.rdw.reporting.processor.service;

import org.opentestsystem.rdw.reporting.common.model.ReportQuery;
import org.opentestsystem.rdw.reporting.common.web.security.User;
import org.opentestsystem.rdw.reporting.processor.model.UserReport;
import org.opentestsystem.rdw.reporting.processor.web.ReportContentResource;

import javax.validation.constraints.NotNull;
import java.util.List;

/**
 * Responsible for managing exam reports
 */
public interface ExamReportService {

    /**
     * Gets the user's reports
     *
     * @param user the user to get reports for
     * @return the user's reports
     */
    List<UserReport> getReports(@NotNull User user);

    /**
     * Gets the user's reports that match the given IDs
     *
     * @param user the user to get reports for
     * @param reportIds the IDs of the reports to get
     * @return the user's reports
     */
    List<UserReport> getReports(@NotNull User user, Iterable<Long> reportIds);

    /**
     * Gets the report file as a resource to be written to an http response
     *
     * @param user     the report owner
     * @param reportId the report ID
     */
    ReportContentResource openReportContent(@NotNull final User user, final long reportId);

    /**
     * Creates a report
     *
     * @param user The user creating the report
     * @param query The query to use to get the data for the report
     * @return
     */
    UserReport createReport(@NotNull User user, @NotNull ReportQuery query);

    /**
     * Deletes a report matching the given user and user report ID
     *
     * @param user The user
     * @param id The user report ID
     */
    void delete(@NotNull User user, long id);

}