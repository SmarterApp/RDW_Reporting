package org.opentestsystem.rdw.reporting.processor.web.converter;

import org.opentestsystem.rdw.reporting.processor.web.ReportContentResource;
import org.springframework.http.HttpOutputMessage;
import org.springframework.http.MediaType;
import org.springframework.http.converter.HttpMessageNotWritableException;

import java.io.IOException;

/**
 * Implementations of this interface are responsible for optionally accepting a
 * {@link ReportContentResource} instance.
 * If accepted, implementations are responsible for writing the ReportContentResource
 * to the given output message, including any required response headers.
 */
public interface ReportHandler {

    /**
     * Test if this handler can write the given ReportContentResource instance.
     *
     * @param resource              A resource
     * @param requestedMediaType    The requested response media type
     * @return  True if this handler can write the resource for the requested media type
     */
    boolean accept(ReportContentResource resource, MediaType requestedMediaType);

    /**
     * Write the given ReportContentResource to the output message.
     *
     * @param resource      A resource
     * @param outputMessage The destination output message
     * @throws IOException  If there is a problem reading/writing the resource content
     * @throws HttpMessageNotWritableException  If there is a problem reading/writing the resource content
     */
    void writeResource(ReportContentResource resource, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException;

}
