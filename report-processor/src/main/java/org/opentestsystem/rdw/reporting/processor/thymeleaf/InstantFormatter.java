package org.opentestsystem.rdw.reporting.processor.thymeleaf;

import java.time.Instant;
import java.time.LocalDateTime;
import java.time.ZoneId;
import java.time.format.DateTimeFormatter;
import java.time.format.FormatStyle;
import java.util.Locale;

/**
 * This class is responsible for converting an Instant into a formatted
 * date string.
 * Currently we use the system timezone.
 */
class InstantFormatter {

    private final DateTimeFormatter dateFormat;

    public InstantFormatter(final Locale locale) {
        this.dateFormat = DateTimeFormatter
                .ofLocalizedDate(FormatStyle.MEDIUM)
                .withLocale(locale);
    }

    /**
     * Format the given instant as a locale-specific MEDIUM date string.
     *
     * @param instant The instant to display
     * @return A formatted date string
     */
    public String formatDate(final Instant instant) {
        return LocalDateTime
                .ofInstant(instant, ZoneId.systemDefault())
                .format(dateFormat);
    }
}
