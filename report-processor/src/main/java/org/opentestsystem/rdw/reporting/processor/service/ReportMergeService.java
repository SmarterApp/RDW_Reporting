package org.opentestsystem.rdw.reporting.processor.service;

import org.opentestsystem.rdw.reporting.processor.model.UserReport;
import org.opentestsystem.rdw.reporting.processor.model.MergedReport;

import java.io.IOException;
import java.io.InputStream;
import java.util.List;
import java.util.function.Supplier;

/**
 * Implementations of this interface are responsible for merging multiple
 * PDFs into a single UserReport resource.  The resource may be either a single
 * PDF or a ZIP containing multiple PDFs.
 */
public interface ReportMergeService {

    /**
     * Merge the given source PDFs into a single File in order.
     * The result file may be either a single PDF or a ZIP file containing
     * multiple PDFs.
     * The File response should be deleted once consumed.
     *
     * @param report        The report being merged
     * @param sourcePdfs    The source PDF InputStream suppliers
     * @return The merged PDF content file
     * @throws IOException If there is a problem merging PDFs
     */
    MergedReport mergePdfs(UserReport report, List<Supplier<InputStream>> sourcePdfs) throws IOException;
}
