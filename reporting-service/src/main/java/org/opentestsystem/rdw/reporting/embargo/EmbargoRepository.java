package org.opentestsystem.rdw.reporting.embargo;

import org.opentestsystem.rdw.reporting.common.model.EmbargoStatus;
import org.opentestsystem.rdw.reporting.common.security.PermissionSource;

import java.util.Map;

/**
 * Repository responsible for the embargo data
 */
public interface EmbargoRepository {

    /**
     * Test if the given permissions have read access to any embargoed exams.
     *
     * @param permissionSource The permission source
     * @return Map of embargo statuses to booleans. True if the given permissions can view the embargo status
     * and there are results with that status.
     */
    Map<EmbargoStatus, Boolean> hasEmbargoAccess(PermissionSource permissionSource);

    /**
     * Test if the given permissions have read access to any embargoed results for the given
     * search parameters.
     * @param permissionSource The permission source
     * @param search  the search parameters: school year and district
     * @return Map of embargo statuses to booleans. True if the given permissions can view the embargo status
     * and there are results with that status.
     */
    Map<EmbargoStatus, Boolean> hasEmbargoAccess(PermissionSource permissionSource, EmbargoIndividualSearch search);
}
