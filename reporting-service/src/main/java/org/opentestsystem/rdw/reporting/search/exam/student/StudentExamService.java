package org.opentestsystem.rdw.reporting.search.exam.student;


import org.opentestsystem.rdw.reporting.common.model.Student;
import org.opentestsystem.rdw.reporting.common.web.security.User;
import org.springframework.security.access.prepost.PreAuthorize;

import javax.validation.constraints.NotNull;
import java.util.NoSuchElementException;

interface StudentExamService {

    @PreAuthorize("hasAnyAuthority('PERM_GROUP_PII_READ','PERM_INDIVIDUAL_PII_READ')")
    StudentExamHistory getExams(@NotNull User user, long studentId);

    /**
     * Retrieve a student by SSID if it exists and has at least one visible exam.
     *
     * @param user          The authenticated user
     * @param studentSsid   The student SSID
     * @return The student
     * @throws NoSuchElementException if a matching student does not exist
     */
    @PreAuthorize("hasAnyAuthority('PERM_GROUP_PII_READ','PERM_INDIVIDUAL_PII_READ')")
    Student findStudentWithExams(@NotNull User user, String studentSsid);
}
