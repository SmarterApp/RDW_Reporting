package org.opentestsystem.rdw.reporting.common.i18n;

import org.springframework.context.support.AbstractMessageSource;

import java.text.MessageFormat;
import java.util.Locale;
import java.util.Map;

class TranslationServiceMessageSource extends AbstractMessageSource {

    private final InternalTranslationService service;

    TranslationServiceMessageSource(final InternalTranslationService service) {
        this.service = service;
    }

    @Override
    protected MessageFormat resolveCode(final String code, final Locale locale) {
        final Map<String, String> messages = service.getTranslationsByCode(locale);
        final String message = messages.get(code);
        if (message != null) {
            return new MessageFormat(message, locale);
        }
        return null;
    }

}