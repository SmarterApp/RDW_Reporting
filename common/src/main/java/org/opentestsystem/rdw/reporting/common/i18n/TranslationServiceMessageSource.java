package org.opentestsystem.rdw.reporting.common.i18n;

import org.springframework.context.support.AbstractMessageSource;

import java.text.MessageFormat;
import java.util.Locale;
import java.util.Map;

public class TranslationServiceMessageSource extends AbstractMessageSource {

    private final TranslationService service;

    public TranslationServiceMessageSource(final TranslationService service) {
        this.service = service;
    }

    @Override
    protected MessageFormat resolveCode(String code, Locale locale) {
        final Map<String, String> messages = service.getTranslationsForLocale(locale);
        final String message = messages.get(code);
        if (message != null) {
            return new MessageFormat(message, locale);
        }
        return null;
    }

}