package org.opentestsystem.rdw.reporting.common.configuration;

import com.google.common.collect.ImmutableSet;

import java.util.Set;

import static com.google.common.collect.ImmutableSet.toImmutableSet;

public interface AggregateReportingProperties {
    /**
     * This helper allows the property to be set to "null" (or "none") to create an empty set.
     * This is necessary because the default setting for this property is not empty and there
     * is no Spring way to create an empty property that overrides the default setting.
     *
     * @param values type values, may be null
     * @return immutable set with "none"/"null" removed, may be empty but never null
     */
    static ImmutableSet<String> toTypeSet(Set<String> values) {
        return values == null ? ImmutableSet.of() : values.stream()
                .filter(value -> !value.equalsIgnoreCase("none") && !value.equalsIgnoreCase("null"))
                .collect(toImmutableSet());
    }

    /**
     * The assessment types non statewide aggregate reporters can select for aggregate reports
     */
    Set<String> getAssessmentTypes();

    /**
     * The assessment types a statewide aggregate reporter can select for aggregate reports
     */
    Set<String> getStatewideUserAssessmentTypes();

    /**
     * The assessment types allowed for the state level aggregation in the aggregate report
     */
    Set<String> getStateAggregateAssessmentTypes();

}
