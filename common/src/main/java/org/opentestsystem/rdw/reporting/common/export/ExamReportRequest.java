package org.opentestsystem.rdw.reporting.common.export;

import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.google.common.base.MoreObjects;

import java.util.List;
import java.util.Locale;
import java.util.Set;

import static com.google.common.collect.Sets.newHashSet;

/**
 * This class represents a user's request for specific assessment result reports
 * The options are specific to the format in which the report is delivered
 *
 * @param <T> The type of options by which to
 */
public class ExamReportRequest<T> {

    // TODO later this will likely be modelled as search criteria that will yield exam IDs
    private final Set<Long> examIds;
    private final Locale locale;
    private final T options;

    @JsonCreator
    public ExamReportRequest(
            final @JsonProperty("exams") List<Long> examIds,
            final @JsonProperty("locale") Locale locale,
            final @JsonProperty("options") T options) {
        this.examIds = newHashSet(examIds);
        this.locale = locale;
        this.options = options;
    }

    /**
     * Assessment result entity IDs
     *
     * @return the exam IDs
     */
    public Set<Long> getExamIds() {
        return examIds;
    }

    /**
     * The locale in which the report will be translated
     *
     * @return the locale
     */
    public Locale getLocale() {
        return locale;
    }

    /**
     * Format specific options for the report
     *
     * @return the options
     */
    public T getOptions() {
        return options;
    }

    public String toString() {
        return MoreObjects.toStringHelper(this)
                .add("examIds", examIds)
                .add("locale", locale)
                .add("options", options)
                .toString();
    }

}