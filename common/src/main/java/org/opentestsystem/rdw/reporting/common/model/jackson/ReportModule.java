package org.opentestsystem.rdw.reporting.common.model.jackson;

import com.fasterxml.jackson.databind.module.SimpleModule;
import org.opentestsystem.rdw.reporting.common.model.AggregateQuery;
import org.opentestsystem.rdw.reporting.common.model.ReportQuery;
import org.opentestsystem.rdw.reporting.common.model.StudentFilters;

/**
 * This module registers custom Jackson handlers.
 */
public class ReportModule extends SimpleModule {

    public ReportModule() {
        // Use this only if the intention isn't to support the last version of reports
        //setMixInAnnotation(ReportQuery.class, ReportQueryMixin.class);
        setMixInAnnotation(AggregateQuery.class, ReportQueryMixin.class);
        setMixInAnnotation(StudentFilters.class, StudentFiltersMixin.class);

        // Adds support for the last version of reports
        addDeserializer(ReportQuery.class, new ReportQueryDeserializer());
    }
}
