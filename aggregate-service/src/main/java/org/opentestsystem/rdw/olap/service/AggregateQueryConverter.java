package org.opentestsystem.rdw.olap.service;

import org.opentestsystem.rdw.olap.model.AggregateReportQueryDescription;
import org.opentestsystem.rdw.olap.model.OrganizationTypeQuery;
import org.opentestsystem.rdw.olap.repository.ReportRepository;
import org.opentestsystem.rdw.reporting.common.model.AggregateQuery;
import org.opentestsystem.rdw.reporting.common.model.DimensionType;

import java.util.Collection;

/**
 * Responsible for converting instances of {@link AggregateQuery} into a collection of
 * {@link AggregateReportQueryDescription<T>} to be passed into repository.
 * <p>
 * Unlike {@link AggregateQuery}, a {@link ReportRepository} query is limited to one {@link DimensionType},
 * one organization type and one subgroup (if applicable).
 */
public interface AggregateQueryConverter<Q extends AggregateQuery, T extends OrganizationTypeQuery> {
    /**
     * Converts an instance of {@link AggregateQuery} into a collection of
     * {@link AggregateReportQueryDescription<T>} to be passed into repository.
     *
     * @param query the {@link AggregateQuery} to be converted
     * @return the collection of {@link AggregateReportQueryDescription<T>} ready be passed into repository
     */
    Collection<AggregateReportQueryDescription<T>> convert(Q query);
}
