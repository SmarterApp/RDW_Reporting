package org.opentestsystem.rdw.olap.service.impl;

import org.opentestsystem.rdw.olap.model.LongitudinalReportQuery;
import org.opentestsystem.rdw.olap.sqlbuilder.QueryProviderRepositoryHelper;
import org.opentestsystem.rdw.reporting.common.model.BasicLongitudinalReportQuery;
import org.opentestsystem.rdw.reporting.common.model.StudentFilters;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
class BasicLongitudinalReportQueryAdapter
        extends AbstractBasicQueryAdapter<BasicLongitudinalReportQuery, LongitudinalReportQuery, LongitudinalReportQuery.Builder> {

    @Autowired
    BasicLongitudinalReportQueryAdapter(final QueryProviderRepositoryHelper repositoryHelper) {
        super(repositoryHelper);
    }

    @Override
    protected LongitudinalReportQuery.Builder getOrganizationTypeQueryBuilder(final BasicLongitudinalReportQuery reportQuery, final StudentFilters filters) {
        return LongitudinalReportQuery.builder()
                .subjectCode(reportQuery.getSubjectCodes().iterator().next())
                .gradeYearPairs(null); //TODO: calculate school year paris
    }
}