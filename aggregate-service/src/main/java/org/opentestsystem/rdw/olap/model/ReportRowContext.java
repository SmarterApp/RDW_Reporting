package org.opentestsystem.rdw.olap.model;

import org.opentestsystem.rdw.reporting.common.model.Organization;

import java.util.Objects;

/**
 * Represents attributes of a row in the custom aggregate report
 */
@SuppressWarnings("unchecked")
public class ReportRowContext {
    private Dimension dimension;
    private Organization organization;
    private Assessment assessment;

    public Organization getOrganization() {
        return organization;
    }

    public Assessment getAssessment() {
        return assessment;
    }

    public Dimension getDimension() {
        return dimension;
    }

    @Override
    public boolean equals(final Object o) {
        if (this == o) return true;
        if (o == null || !(o instanceof ReportRowContext)) return false;
        final ReportRowContext that = (ReportRowContext) o;
        return Objects.equals(dimension, that.dimension)
                && Objects.equals(organization, that.organization)
                && Objects.equals(assessment, that.assessment);
    }

    @Override
    public int hashCode() {
        return Objects.hash(dimension, organization, assessment);
    }

    public static Builder builder() {
        return new ReportRowContext.Builder();
    }

    public static class Builder<B extends Builder, R extends ReportRowContext> {
        private Organization organization;
        private Assessment assessment;
        private Dimension dimension;

        protected R createInstance() {
            return (R) new ReportRowContext();
        }

        public R build() {
            final ReportRowContext reportRow = createInstance();
            reportRow.organization = organization;
            reportRow.assessment = assessment;
            reportRow.dimension = dimension;
            return (R) reportRow;
        }

        public B copy(ReportRowContext another){
            organization = another.organization;
            assessment = another.assessment;
            dimension = another.dimension;
            return (B) this;
        }
        public B organization(final Organization organization) {
            this.organization = organization;
            return (B) this;
        }

        public B assessment(final Assessment assessment) {
            this.assessment = assessment;
            return (B) this;
        }

        public B dimension(final Dimension dimension) {
            this.dimension = dimension;
            return (B) this;
        }
    }
}