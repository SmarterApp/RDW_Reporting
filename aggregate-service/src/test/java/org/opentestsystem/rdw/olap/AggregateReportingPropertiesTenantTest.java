package org.opentestsystem.rdw.olap;

import com.google.common.collect.ImmutableSet;
import org.junit.Before;
import org.junit.Test;
import org.opentestsystem.rdw.reporting.common.configuration.AggregateReportingPropertiesTenant;

import static org.assertj.core.api.Assertions.assertThat;

public class AggregateReportingPropertiesTenantTest {

    private AggregateReportingPropertiesTenant settings;

    @Before
    public void createSettings() {
        settings = new AggregateReportingPropertiesTenant();
    }

    @Test
    public void itShouldRetainSettings() {
        settings.setAssessmentTypes(ImmutableSet.of("ica", "sum"));
        settings.setStatewideUserAssessmentTypes(ImmutableSet.of("sum"));
        settings.setStateAggregateAssessmentTypes(ImmutableSet.of("ica"));

        assertThat(settings.getAssessmentTypes()).containsExactlyInAnyOrder("ica", "sum");
        assertThat(settings.getStatewideUserAssessmentTypes()).containsExactlyInAnyOrder("sum");
        assertThat(settings.getStateAggregateAssessmentTypes()).containsExactlyInAnyOrder("ica");
    }

    @Test
    public void itShouldFilterNullPlaceholder() {
        settings.setAssessmentTypes(ImmutableSet.of("null", "ica", "sum"));
        settings.setStatewideUserAssessmentTypes(ImmutableSet.of("none"));
        settings.setStateAggregateAssessmentTypes(ImmutableSet.of("null"));

        assertThat(settings.getAssessmentTypes()).containsExactlyInAnyOrder("ica", "sum");
        assertThat(settings.getStatewideUserAssessmentTypes()).isEmpty();
        assertThat(settings.getStateAggregateAssessmentTypes()).isEmpty();
    }
}
