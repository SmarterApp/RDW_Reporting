package org.opentestsystem.rdw.admin.service.impl;

import org.opentestsystem.rdw.admin.service.Comparer;
import org.xmlunit.builder.DiffBuilder;
import org.xmlunit.builder.Input;

/**
 * Comparer responsible for comparing XML
 */
public class XmlComparer implements Comparer<String> {

    @Override
    public boolean equals(final String a, final String b) {

        // TODO possibly remove leading header line <?xml

        return !DiffBuilder
                .compare(Input.fromString(a).build())
                .withTest(Input.fromString(b).build())
                .ignoreComments()
                .ignoreWhitespace()
                .build()
                .hasDifferences();
    }

}
