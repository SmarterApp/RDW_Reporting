package org.opentestsystem.rdw.admin.configuration.multitenant;

import org.opentestsystem.rdw.multitenant.TenantProperties;
import org.opentestsystem.rdw.reporting.common.configuration.ReportingSystemProperties;
import org.opentestsystem.rdw.reporting.common.model.SearchFieldPermissionLevel;
import org.opentestsystem.rdw.reporting.common.model.StudentFieldType;

import java.util.*;

/**
 * Used to store mock TenantConfigurationData
 *   TODO remove once api calls are functional
 */
public class TenantConfigurationStubs {

    static public  TenantConfiguration createTenantWithMockDefaults() {
        TenantConfiguration tenantConfiguration = new TenantConfiguration();
        TenantProperties.Tenant tenant = new TenantProperties.Tenant();
        tenant.setId("CA");
        tenant.setKey("CA");
        tenant.setName("California");
        tenant.setDescription("This is a description");

        return getTenantConfiguration(tenantConfiguration, tenant);
    }

    private static TenantConfiguration getTenantConfiguration(TenantConfiguration tenantConfiguration, TenantProperties.Tenant tenant) {
        tenantConfiguration.setTenant(tenant);
        tenantConfiguration.setLocalization(getLocalization());

        ConfigurationProperties configurationProperties = new ConfigurationProperties();
        configurationProperties.setTask(getTask());
        configurationProperties.setReporting(getReporting());
        configurationProperties.setDatasources(getDatasources());
        tenantConfiguration.setConfigurationProperties(configurationProperties);

        return tenantConfiguration;
    }

    // Todo remove once api calls are functional
    static public  TenantConfiguration createTenantWithMockDefaultsNV() {
        TenantConfiguration tenantConfiguration = new TenantConfiguration();
        TenantProperties.Tenant tenant = new TenantProperties.Tenant();
        tenant.setId("NV");
        tenant.setKey("NV");
        tenant.setName("Nevada");
        tenant.setDescription("This is a Nevada description");
        return getTenantConfiguration(tenantConfiguration, tenant);
    }

    static private Map<String, DataSource> getDatasources () {
        Map<String, DataSource> datasources = new LinkedHashMap<>();
        DataSource dataSource = new DataSource();
        dataSource.setInitialSize(1);
        dataSource.setMaxActive(2);
        dataSource.setUrl("rdw-aurora-");
        dataSource.setUsername("sbac");
        dataSource.setPassword("****");
        datasources.put("reporting_ro", dataSource);
        datasources.put("warehouse_rw_", dataSource);
        datasources.put("olap_ro", dataSource);
        datasources.put("reporting_rw", dataSource);
        return datasources;
    }

    static private Reporting getReporting() {
        Reporting reporting = new Reporting();
        reporting.setSchoolYear(2018);
        reporting.setTransferAccessEnabled(true);
        reporting.setAccessDeniedUrl("forward:/assets/public/access-denied.html");
        reporting.setAnalyticsTrackingId("UA-102446884-4");
        reporting.setUserGuideUrl("https://portal.smarterbalanced.org/library/en/reporting-system-user-guide.pdf");
        reporting.setInterpretiveGuideUrl("https://portal.smarterbalanced.org/library/en/reporting-system-interpretive-guide.pdf");
        reporting.setPercentileDisplayEnabled(true);
        reporting.setLandingPageUrl("forward:/landing.html");
        List<String> languages = new ArrayList<>();
        languages.add("en");
        reporting.setReportLanguages(languages);
        ReportingSystemProperties.StateProperties state = new ReportingSystemProperties.StateProperties();
        reporting.setState(state);
        Map<StudentFieldType, SearchFieldPermissionLevel> studentFields = new HashMap<>();
        studentFields.put(StudentFieldType.EconomicDisadvantage, SearchFieldPermissionLevel.Disabled);
        studentFields.put(StudentFieldType.LimitedEnglishProficiency, SearchFieldPermissionLevel.Disabled);
        studentFields.put(StudentFieldType.MigrantStatus, SearchFieldPermissionLevel.Enabled);
        studentFields.put(StudentFieldType.EnglishLanguageAcquisitionStatus, SearchFieldPermissionLevel.Enabled);
        studentFields.put(StudentFieldType.PrimaryLanguage, SearchFieldPermissionLevel.Enabled);
        studentFields.put(StudentFieldType.Ethnicity, SearchFieldPermissionLevel.Enabled);
        studentFields.put(StudentFieldType.Gender, SearchFieldPermissionLevel.Admin);
        studentFields.put(StudentFieldType.IndividualEducationPlan, SearchFieldPermissionLevel.Admin);
        studentFields.put(StudentFieldType.Section504, SearchFieldPermissionLevel.Admin);
        return reporting;
    }


    static private LocalizationProperties getLocalization() {
        Map<String, String> localization = new LinkedHashMap<>();
        localization.put("common.ethnicity.HispanicOrLatinoEthnicity", "Hispanic or Latino");
        localization.put("common.ethnicity.Asian", "Asian");
        localization.put("common.ethnicity.BlackOrAfricanAmerican", "Black or African American");
        localization.put("common.ethnicity.AmericanIndianOrAlaskaNative", "American Indian or Alaska Native");
        localization.put("common.ethnicity.White", "White");
        localization.put("common.ethnicity.NativeHawaiianOrOtherPacificIslander", "Native Hawaiian or Other Pacific Islander");
        localization.put("common.ethnicity.DemographicRaceTwoOrMoreRaces", "Two or More Races");
        localization.put("gender.Male", "Male");
        localization.put("gender.Female", "Female");
        localization.put("gender.Nonbinary", "Neutral");
        LocalizationProperties localizationProperties = new LocalizationProperties();
        localizationProperties.setLocalization(localization);
        return localizationProperties;
    }

    static private Task getTask() {
        Task task = new Task();

        RemoveStaleReports removeStaleReports= new RemoveStaleReports();
        removeStaleReports.setCron("0 0 8 * * *");
        removeStaleReports.setMaxRandomMinutes("30");
        removeStaleReports.setMaxReportLifetimeDays("20");
        task.setRemoveStaleReports(removeStaleReports);
        return task;
    }

    // Mock
    static public TenantOverride getTenantOverrideCA() {
        TenantOverride tenantOverride = new TenantOverride();
        tenantOverride.setLocalization(getLocalization());

        TenantProperties.Tenant tenant = new TenantProperties.Tenant();
        tenant.setId("CA");
        tenant.setKey("CA");
        tenant.setName("California");
        tenant.setDescription("This is a California's override description");

        tenantOverride.setTenant(tenant);
        return getTenantOverrideCfg(tenantOverride);

    }

    static public TenantOverride getTenantOverrideNV() {
        TenantOverride tenantOverride = new TenantOverride();
        tenantOverride.setLocalization(getLocalization());

        TenantProperties.Tenant tenant = new TenantProperties.Tenant();
        tenant.setId("NV");
        tenant.setKey("NV");
        tenant.setName("Nevada");
        tenant.setDescription("This is a Nevada's Override description");

        tenantOverride.setTenant(tenant);
        return getTenantOverrideCfg(tenantOverride);

    }

    static private TenantOverride getTenantOverrideCfg(TenantOverride tenantOverride) {
        Map<String, DataSource> datasourcesMap = new LinkedHashMap<>();
        DataSource dataSourceRep = new DataSource.Builder()
                .initialSize(2)
                .maxActive(2)
                .build();
        datasourcesMap.put("reporting_ro", dataSourceRep);

        DataSource dataSourceWh = new DataSource.Builder()
                .initialSize(2)
                .maxActive(2)
                .build();
        datasourcesMap.put("warehouse_rw_", dataSourceWh);

        DataSource dataSourceOl = new DataSource.Builder()
                .initialSize(2)
                .maxActive(2)
                .build();
        datasourcesMap.put("olap_ro", dataSourceOl);

        Reporting reporting = new Reporting();
        reporting.setSchoolYear(2019);
        reporting.setTransferAccessEnabled(false);

        tenantOverride.setLocalization(getLocalization());

        ConfigurationProperties configurationProperties = new ConfigurationProperties();
        configurationProperties.setDatasources(datasourcesMap);
        configurationProperties.setReporting(reporting);

        tenantOverride.setConfigurationProperties(configurationProperties);

        return tenantOverride;
    }

    static public String tenantConfigurationJson = "{ " +
            "   \"tenant\":{ " +
            "      \"id\":\"CA\", " +
            "      \"key\":\"CA\", " +
            "      \"name\":\"California\", " +
            "      \"description\":\"This is a description\" " +
            "   }, " +
            "   \"configurationProperties\":{ " +
            "      \"datasources\":{ " +
            "         \"reporting_ro_datasource\":{ " +
            "            \"url-server\":\"rdw-aurora-\", " +
            "            \"username\":\"sbac\", " +
            "            \"password\":\"****\" " +
            "         }, " +
            "         \"warehouse_rw_datasource\":{ " +
            "            \"url-server\":\"rdw-aurora-\", " +
            "            \"username\":\"sbac\", " +
            "            \"password\":\"****\" " +
            "         }, " +
            "         \"olap_ro_datasource\":{ " +
            "            \"url-server\":\"rdw-aurora-\", " +
            "            \"username\":\"sbac\", " +
            "            \"password\":\"****\" " +
            "         }, " +
            "         \"reporting_rw_datasource\":{ " +
            "            \"url-server\":\"rdw-aurora-\", " +
            "            \"username\":\"sbac\", " +
            "            \"password\":\"****\" " +
            "         } " +
            "      }, " +
            "      \"reporting\":{ " +
            "         \"school-year\":\"2018\", " +
            "         \"transfer-access-enabled\":\"true\", " +
            "         \"translation-location\":\"binary-\", " +
            "         \"analytics-tracking-id\":\"UA-102446884-4\", " +
            "         \"interpretive-guide-url\":\"https://portal.smarterbalanced.org/library/en/reporting-system-interpretive-guide.pdf\", " +
            "         \"user-guide-url\":\"https://portal.smarterbalanced.org/library/en/reporting-system-user-guide.pdf\", " +
            "         \"access-denied-url\":\"forward:/assets/public/access-denied.html\", " +
            "         \"landing-page-url\":\"forward:/landing.html\", " +
            "         \"percentile-display-enabled\":\"true\", " +
            "         \"report-languages\":\"es\", " +
            "         \"ui-languages\":\"es\", " +
            "         \"student-fields\":{ " +
            "            \"EconomicDisadvantage\":\"disabled\", " +
            "            \"LimitedEnglishProficiency\":\"disabled\", " +
            "            \"MigrantStatus\":\"enabled\", " +
            "            \"EnglishLanguageAcquisitionStatus\":\"enabled\", " +
            "            \"PrimaryLanguage\":\"enabled\", " +
            "            \"Ethnicity\":\"enabled\", " +
            "            \"Gender\":\"admin\", " +
            "            \"IndividualEducationPlan\":\"admin\", " +
            "            \"Section504\":\"admin\" " +
            "         }, " +
            "         \"state\":{ " +
            "            \"code\":\"CA\", " +
            "            \"name\":\"California\" " +
            "         } " +
            "      }, " +
            "      \"task\":{ " +
            "         \"remove-stale-reports\":{ " +
            "            \"cron\":\"0 0 8 * * *\", " +
            "            \"max-report-lifetime-days\":\"30\", " +
            "            \"max-random-minutes\":\"20\" " +
            "         } " +
            "      } " +
            "   }, " +
            "   \"tenantOverrides\":{ " +
            "      \"tenant\":{ " +
            "         \"id\":\"CA\", " +
            "         \"key\":\"CA\", " +
            "         \"name\":\"California\", " +
            "         \"description\":\"This is a description\" " +
            "      }, " +
            "      \"configurationProperties\":{ " +
            "         \"datasources\":{ " +
            "            \"reporting_ro_datasource\":{ " +
            "               \"initialSize\":\"1\", " +
            "               \"maxActive\":\"2\" " +
            "            }, " +
            "            \"warehouse_rw_datasource\":{ " +
            "               \"initialSize\":\"1\", " +
            "               \"maxActive\":\"2\" " +
            "            }, " +
            "            \"olap_ro_datasource\":{ " +
            "               \"initialSize\":\"1\", " +
            "               \"maxActive\":\"2\" " +
            "            }, " +
            "            \"reporting_rw_datasource\":{ " +
            "               \"initialSize\":\"1\", " +
            "               \"maxActive\":\"2\" " +
            "            } " +
            "         }, " +
            "         \"reporting\":{ " +
            "            \"percentile-display-enabled\":\"false\", " +
            "            \"student-fields\":{ " +
            "               \"EconomicDisadvantage\":\"enabled\" " +
            "            }, " +
            "            \"state\":{ " +
            "               \"code\":\"CA\", " +
            "               \"name\":\"California\" " +
            "            } " +
            "         } " +
            "      }, " +
            "      \"localizationProperties\":{ " +
            "         \"common.ethnicity.HispanicOrLatinoEthnicity\":\"Hispanic or Latino\", " +
            "         \"common.ethnicity.Asian\":\"Asian\", " +
            "         \"common.ethnicity.BlackOrAfricanAmerican\":\"Black or African American\", " +
            "         \"common.ethnicity.AmericanIndianOrAlaskaNative\":\"American Indian or Alaska Native\", " +
            "         \"common.ethnicity.White\":\"White\", " +
            "         \"common.ethnicity.NativeHawaiianOrOtherPacificIslander\":\"Native Hawaiian or Other Pacific Islander\", " +
            "         \"common.ethnicity.DemographicRaceTwoOrMoreRaces\":\"Two or More Races\", " +
            "         \"gender.Male\":\"Male\", " +
            "         \"gender.Female\":\"Female\", " +
            "         \"gender.Nonbinary\":\"Neutral\" " +
            "      } " +
            "   } " +
            "}";

    static public String tenantOverrideJson = "{ " +
            "     \"tenant\": {" +
            "        \"id\": \"NV\"," +
            "        \"key\": \"NV\"," +
            "        \"name\": \"Nevada\"," +
            "        \"description\": \"This is a Nevada's Tenant\"" +
            "      },"+
            "   \"configurationProperties\":{ " +
            "      \"datasources\":{ " +
            "         \"reporting_ro_datasource\":{ " +
            "            \"url-server\":\"rdw-aurora-\", " +
            "            \"username\":\"sbac\", " +
            "            \"password\":\"****\" " +
            "         } " +
            "      }, " +
            "      \"reporting\":{ " +
            "         \"school-year\":\"2018\", " +
            "         \"transfer-access-enabled\":\"true\", " +
            "         \"translation-location\":\"binary-\", " +
            "         \"analytics-tracking-id\":\"UA-102446884-4\", " +
            "         \"interpretive-guide-url\":\"https://portal.smarterbalanced.org/library/en/reporting-system-interpretive-guide.pdf\", " +
            "         \"user-guide-url\":\"https://portal.smarterbalanced.org/library/en/reporting-system-user-guide.pdf\", " +
            "         \"access-denied-url\":\"forward:/assets/public/access-denied.html\", " +
            "         \"landing-page-url\":\"forward:/landing.html\", " +
            "         \"percentile-display-enabled\":\"true\", " +
            "         \"report-languages\":\"es\", " +
            "         \"ui-languages\":\"es\", " +
            "         \"student-fields\":{ " +
            "            \"EconomicDisadvantage\":\"disabled\", " +
            "            \"LimitedEnglishProficiency\":\"disabled\", " +
            "            \"MigrantStatus\":\"enabled\", " +
            "            \"EnglishLanguageAcquisitionStatus\":\"enabled\", " +
            "            \"PrimaryLanguage\":\"enabled\", " +
            "            \"Ethnicity\":\"enabled\", " +
            "            \"Gender\":\"admin\", " +
            "            \"IndividualEducationPlan\":\"admin\", " +
            "            \"Section504\":\"admin\" " +
            "         }, " +
            "         \"state\":{ " +
            "            \"code\":\"CA\", " +
            "            \"name\":\"California\" " +
            "         } " +
            "      }, " +
            "      \"task\":{ " +
            "         \"remove-stale-reports\":{ " +
            "            \"cron\":\"0 0 8 * * *\", " +
            "            \"max-report-lifetime-days\":\"30\", " +
            "            \"max-random-minutes\":\"20\" " +
            "         } " +
            "      } " +
            "   }," +
            "  \"localizationProperties\" : { " +
            "     \"common.ethnicity.HispanicOrLatinoEthnicity\": \"Hispanic or Latino\", " +
            "     \"common.ethnicity.Asian\": \"Asian\", " +
            "     \"common.ethnicity.BlackOrAfricanAmerican\": \"Black or African American\", " +
            "     \"common.ethnicity.AmericanIndianOrAlaskaNative\": \"American Indian or Alaska Native\", " +
            "     \"common.ethnicity.White\": \"White\", " +
            "     \"common.ethnicity.NativeHawaiianOrOtherPacificIslander\": \"Native Hawaiian or Other Pacific Islander\", " +
            "     \"common.ethnicity.DemographicRaceTwoOrMoreRaces\": \"Two or More Races\", " +
            "     \"gender.Male\": \"Male\", " +
            "     \"gender.Female\": \"Female\", " +
            "     \"gender.Nonbinary\": \"Neutral\" " +
            "   }" +
            "}"   ;

}
