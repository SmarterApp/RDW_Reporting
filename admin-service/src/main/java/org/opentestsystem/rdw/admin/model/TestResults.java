package org.opentestsystem.rdw.admin.model;

import org.opentestsystem.rdw.reporting.common.model.OrganizationType;

/**
 * This class encapsulates the current embargo state for an organization.
 * It combines the multiple raw embargo settings and some useful metadata for the UI.
 */
public class TestResults {

    private OrganizationType organizationType;  // organization type, State, District, etc.
    private Long organizationId;                // organization id
    private String organizationName;            // organization name
    private Integer schoolYear;                 // school year
    private String subject;                     // subject
    private EmbargoStatus individualStatus;     // embargo status for individual results
    private EmbargoStatus aggregateStatus;      // embargo status for aggregate results
    private Integer examCount;

    /**
     * @return embargo organization type
     */
    public OrganizationType getOrganizationType() {
        return organizationType;
    }

    /**
     * @return embargo organization id; null for State
     */
    public Long getOrganizationId() {
        return organizationId;
    }

    /**
     * @return embargo organization name
     */
    public String getOrganizationName() {
        return organizationName;
    }

    /**
     * @return embargo school year
     */
    public Integer getSchoolYear() {
        return schoolYear;
    }

    public String getSubject() {
        return subject;
    }

    public EmbargoStatus getIndividualStatus() {
        return individualStatus;
    }

    public EmbargoStatus getAggregateStatus() {
        return aggregateStatus;
    }

    public Integer getExamCount() {
        return examCount;
    }

    /**
     * @return new builder with this embargo's values
     */
    public Builder copy() {
        return builder().copy(this);
    }

    /**
     * @return new builder
     */
    public static Builder builder() {
        return new Builder();
    }

    public static class Builder {
        private OrganizationType organizationType;
        private Long organizationId;
        private String organizationName;
        private Integer schoolYear;
        private String subject;
        private EmbargoStatus individualStatus;
        private EmbargoStatus aggregateStatus;
        private Integer examCount;

        public TestResults build() {
            final TestResults embargo = new TestResults();

            embargo.organizationType = organizationType;
            embargo.organizationId = organizationId;
            embargo.organizationName = organizationName;
            embargo.schoolYear = schoolYear;
            embargo.subject = subject;
            embargo.individualStatus = individualStatus;
            embargo.aggregateStatus = aggregateStatus;
            embargo.examCount = examCount;

            return embargo;
        }

        public Builder copy(final TestResults embargo) {
            organizationType = embargo.organizationType;
            organizationId = embargo.organizationId;
            organizationName = embargo.organizationName;
            schoolYear = embargo.schoolYear;
            subject = embargo.subject;
            individualStatus = embargo.individualStatus;
            aggregateStatus = embargo.aggregateStatus;
            examCount = embargo.examCount;

            return this;
        }

        public Builder organization(final OrganizationType type, final long id, final String name) {
            this.organizationType = type;
            this.organizationId = id;
            this.organizationName = name;
            return this;
        }

        public Builder organizationType(final OrganizationType type) {
            this.organizationType = type;
            return this;
        }

        public Builder organizationId(final Long id) {
            this.organizationId = id;
            return this;
        }

        public Builder organizationName(final String name) {
            this.organizationName = name;
            return this;
        }

        public Builder schoolYear(final Integer schoolYear) {
            this.schoolYear = schoolYear;
            return this;
        }

        public Builder subject(final String subject) {
            this.subject = subject;
            return this;
        }

        public Builder individualStatus(final EmbargoStatus individualStatus) {
            this.individualStatus = individualStatus;
            return this;
        }

        public Builder aggregateStatus(final EmbargoStatus aggregateStatus) {
            this.aggregateStatus = aggregateStatus;
            return this;
        }

        public Builder examCount(final int examCount) {
            this.examCount = examCount;
            return this;
        }
    }
}
