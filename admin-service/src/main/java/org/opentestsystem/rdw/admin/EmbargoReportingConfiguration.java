package org.opentestsystem.rdw.admin;

import org.opentestsystem.rdw.multitenant.TenantKeyResolver;
import org.opentestsystem.rdw.reporting.common.configuration.EmbargoPropertiesResolver;
import org.opentestsystem.rdw.reporting.common.configuration.EmbargoPropertiesRoot;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.cloud.context.config.annotation.RefreshScope;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class EmbargoReportingConfiguration {

    @Bean
    @ConfigurationProperties("embargo")
    @RefreshScope
    EmbargoPropertiesRoot embargoPropertiesRoot() {
        return new EmbargoPropertiesRoot();
    }

    @Bean
    @RefreshScope
    EmbargoPropertiesResolver embargoProperties(TenantKeyResolver tenantKeyResolver,
                                                           EmbargoPropertiesRoot embargoPropertiesRoot) {
        return new EmbargoPropertiesResolver(tenantKeyResolver, embargoPropertiesRoot);
    }
}
