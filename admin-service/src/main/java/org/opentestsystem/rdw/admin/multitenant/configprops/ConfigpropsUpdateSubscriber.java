package org.opentestsystem.rdw.admin.multitenant.configprops;

import com.google.common.annotations.VisibleForTesting;
import org.opentestsystem.rdw.multitenant.configprops.ConfigpropsUpdateMessage;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.integration.annotation.ServiceActivator;
import org.springframework.messaging.Message;

import static org.opentestsystem.rdw.multitenant.configprops.ConfigpropsProcessor.ConfigpropsUpdated;

public class ConfigpropsUpdateSubscriber {
    private static final Logger logger = LoggerFactory.getLogger(ConfigpropsUpdateSubscriber.class);

    @ServiceActivator(inputChannel = ConfigpropsUpdated)
    @VisibleForTesting
    public void createTenantAsync(final Message<ConfigpropsUpdateMessage> createTenantMessage) {
        ConfigpropsUpdateMessage configpropsUpdateMessage = createTenantMessage.getPayload();
        //TODO: remove me - log error for POC
        logger.error("configpropsUpdateMessage service: {} configprops: {}", configpropsUpdateMessage.getService(), configpropsUpdateMessage.getConfigprops());
    }

}
