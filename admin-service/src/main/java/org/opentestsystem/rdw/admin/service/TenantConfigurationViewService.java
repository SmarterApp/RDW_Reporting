package org.opentestsystem.rdw.admin.service;

import org.opentestsystem.rdw.admin.model.TenantConfiguration;

/**
 * A unified current (point-in-time) view abstraction of {@link TenantConfiguration} composed
 * of multiple data providers
 */
public interface TenantConfigurationViewService {

    /**
     * Non-tenant specific default configuration instance wide
     *
     * @return default tenant configuration
     */
    TenantConfiguration getDefaultTenantConfiguration();

    /**
     * Sandbox default configuration specific to parent tenant
     *
     * @return default sandbox tenant configuration
     */
    TenantConfiguration getDefaultSandboxTenantConfiguration(String parentKey);

    /**
     * Configuration for a tenant, including sandboxes
     *
     * @param key tenant key
     * @return ApplicationTenantConfiguration for the given tenantKey
     */
    TenantConfiguration getTenantConfiguration(String key);

    /**
     * @param prefix to search for
     * @return true if the given prefix is found the existing tenants
     */
    //TODO: move this to out of here, it is too  high level
    boolean archivePrefixExists(String prefix);

    /**
     * @param dataSource         the dataSource to search through, i.e. "reporting_ro"
     * @param dataSourceDatabase the database to search for in existing DBs and Auruoa
     * @return true if the database was found in the existing tenants dataSource
     */
    //TODO: move this to out of here, it is too  high level
    boolean dataSourceExists(String dataSource, String dataSourceDatabase);

    /**
     * @param dataSourceDatabase same database name as default
     * @param userName           different username than the default (or any other olap dataSource or in Redshift)
     * @return true if the olap DataSource cannot be created with these settings, false means ok to create
     */
    //TODO: move this to out of here, it is too  high level
    boolean dataSourceOlapExists(String dataSourceDatabase, String userName);

    /**
     * TODO: get rid of this, it looks like it is some sort of cache?
     */
    @Deprecated
    void servicesPropertiesRefresh();
}
