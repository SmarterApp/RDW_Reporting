package org.opentestsystem.rdw.admin.model;

import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonRawValue;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;

import org.opentestsystem.rdw.admin.multitenant.SandboxDataSets;
import org.opentestsystem.rdw.admin.multitenant.administration.TenantAdministrationStatus;
import org.opentestsystem.rdw.admin.web.RawJsonDeserializer;
import org.opentestsystem.rdw.archive.ArchivePropertiesTenant;
import org.opentestsystem.rdw.multitenant.Tenant;
import org.opentestsystem.rdw.multitenant.datasource.DataSourceElementsTenant;
import org.opentestsystem.rdw.reporting.common.configuration.AggregateReportingPropertiesTenant;
import org.opentestsystem.rdw.reporting.common.configuration.ReportingSystemPropertiesImpl;

import java.util.LinkedHashMap;
import java.util.Map;

/**
 * This contains tenant specific configuration, tenant, properties and localization for a tenant.
 * These generally override the default
 */
public class TenantConfiguration {

    //Audit Note: confirmed superset of org.opentestsystem.rdw.admin.model.SandboxConfiguration

    /***
     * The configured tenant
     */
    private Tenant tenant;

    /***
     * The parent tenant key (only used during creation)
     */
    private String parentTenantKey;

//    /***
//     * Tenant configurable elements
//     */
//    private ApplicationTenantConfiguration applicationTenantConfiguration;

    /**
     * Localization json literal
     */
    @JsonDeserialize(using = RawJsonDeserializer.class)
    @JsonRawValue
    private String localization;

    /**
     * Status of the tenant creation
     */
    private TenantAdministrationStatus administrationStatus;

    /**
     * Reporting configuration.
     */
    private ReportingSystemPropertiesImpl reporting;

    /**
     * DataSource configuration.  Never directly configured for Sandboxes.
     */
    @JsonProperty("datasources")
    private Map<String, DataSourceElementsTenant> dataSources = new LinkedHashMap<>();

    /**
     * Archive configuration.  Never directly configured for Sandboxes.
     */
    @JsonProperty("archive")
    private ArchivePropertiesTenant archiveProperties;

    /**
     * Archive configuration.
     */
    @JsonProperty("aggregate")
    private AggregateReportingPropertiesTenant aggregateReportingPropertiesTenant;

    /**
     * All available sandbox datasets.
     */
    //TODO: see if we can remove this, replace with single org.opentestsystem.rdw.admin.multitenant.DataSet, provide API alternative
    private SandboxDataSets sandboxDatasets;

    public TenantConfiguration() { }

    public Tenant getTenant() {
        return tenant;
    }

    public void setTenant(Tenant  tenant) {
        this.tenant = tenant;
    }

    public String getParentTenantKey() {
        return parentTenantKey;
    }

    public void setParentTenantKey(String parentTenantKey) {
        this.parentTenantKey = parentTenantKey;
    }

//    public ApplicationTenantConfiguration getApplicationTenantConfiguration() {
//        return applicationTenantConfiguration;
//    }
//
//    public void setApplicationTenantConfiguration(ApplicationTenantConfiguration applicationTenantConfiguration) {
//        this.applicationTenantConfiguration = applicationTenantConfiguration;
//    }

    public String getLocalization() {
        return localization;
    }

    public void setLocalization(String localization) {
        this.localization = localization;
    }

    public SandboxDataSets getSandboxDatasets() {
        return sandboxDatasets;
    }

    public void setSandboxDatasets(final SandboxDataSets sandboxDatasets) {
        this.sandboxDatasets = sandboxDatasets;
    }

    public TenantAdministrationStatus getAdministrationStatus() {
        return administrationStatus;
    }

    public void setAdministrationStatus(TenantAdministrationStatus administrationStatus) {
        this.administrationStatus = administrationStatus;
    }

    public ReportingSystemPropertiesImpl getReporting() {
        return reporting;
    }

    public void setReporting(ReportingSystemPropertiesImpl reporting) {
        this.reporting = reporting;
    }

    public Map<String, DataSourceElementsTenant> getDataSources() {
        return dataSources;
    }

    public void setDataSources(Map<String, DataSourceElementsTenant> dataSources) {
        this.dataSources = dataSources;
    }

    public ArchivePropertiesTenant getArchiveProperties() {
        return archiveProperties;
    }

    public void setArchiveProperties(ArchivePropertiesTenant archiveProperties) {
        this.archiveProperties = archiveProperties;
    }

    public AggregateReportingPropertiesTenant getAggregateReportingPropertiesTenant() {
        return aggregateReportingPropertiesTenant;
    }

    public void setAggregateReportingPropertiesTenant(AggregateReportingPropertiesTenant aggregateReportingPropertiesTenant) {
        this.aggregateReportingPropertiesTenant = aggregateReportingPropertiesTenant;
    }
}
