package org.opentestsystem.rdw.admin.repository;

import org.opentestsystem.rdw.admin.model.EmbargoQuery;
import org.opentestsystem.rdw.admin.model.EmbargoUpdate;
import org.opentestsystem.rdw.admin.model.Embargo;

import java.util.List;

/**
 * Repository for {@link Embargo}
 */
public interface EmbargoRepository {
    /**
     * Find a page of embargo records with the given filters, sort order
     * and page definitions.
     *
     * @param query query object with filters, sort order, page size and offset.
     * @return sorted list of one page of {@link Embargo} records.
     */
    List<Embargo> findEmbargoes(EmbargoQuery query);

    /**
     * Find the total row count for the embargoes
     * @param query query object with filters
     *
     * @return count of total rows available to the query
     */
    int countByQuery(EmbargoQuery query);

    /**
     * Update embargo statuses. When transitioning from current status of Loading, rows may be inserted because
     * any missing records are considered to be Loading.
     *
     * @param embargo the filters for which records to create or update, the current status, and the new status.
     * @param username username to attribute the changes to
     *
     * @return count of impacted records
     */
    int update(EmbargoUpdate embargo, String username);
}
