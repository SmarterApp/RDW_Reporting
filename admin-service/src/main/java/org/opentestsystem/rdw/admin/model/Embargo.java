package org.opentestsystem.rdw.admin.model;

import org.opentestsystem.rdw.reporting.common.model.EmbargoStatus;

/**
 * This class encapsulates the current embargo status for a single district, school year, subject, and report type.
 */
public class Embargo {

    private Long districtId;                    // district id
    private String districtName;                // district name
    private Integer schoolYear;                 // school year
    private Long subjectId;                     // subject id
    private String subjectCode;                 // subject code
    private EmbargoReportType reportType;       // report type -- individual or aggregate
    private EmbargoStatus individualStatus;     // individual embargo status -- loading, reviewing, or released
    private EmbargoStatus aggregateStatus;      // aggregate embargo status -- loading, reviewing, or released
    private Integer examCount;

    public Long getDistrictId() {
        return districtId;
    }

    public String getDistrictName() {
        return districtName;
    }

    public Integer getSchoolYear() {
        return schoolYear;
    }

    public Long getSubjectId() {
        return subjectId;
    }

    public String getSubjectCode() {
        return subjectCode;
    }

    public EmbargoReportType getReportType() {
        return reportType;
    }

    public EmbargoStatus getIndividualStatus() {
        return individualStatus;
    }

    public EmbargoStatus getAggregateStatus() {
        return aggregateStatus;
    }

    public EmbargoStatus getStatus() {
        if (getReportType() == EmbargoReportType.Aggregate) {
            return getAggregateStatus();
        }
        if (getReportType() == EmbargoReportType.Individual) {
            return getIndividualStatus();
        }

        return null;
    }

    public Integer getExamCount() {
        return examCount;
    }

    /**
     * @return new builder with this instance's values
     */
    public Builder copy() {
        return builder().copy(this);
    }

    /**
     * @return new builder
     */
    public static Builder builder() {
        return new Builder();
    }

    public static class Builder {
        private Long districtId;
        private String districtName;
        private Integer schoolYear;
        private Long subjectId;
        private String subjectCode;
        private EmbargoReportType reportType;
        private EmbargoStatus individualStatus;
        private EmbargoStatus aggregateStatus;
        private Integer examCount;

        public Embargo build() {
            final Embargo embargo = new Embargo();

            embargo.districtId = districtId;
            embargo.districtName = districtName;
            embargo.schoolYear = schoolYear;
            embargo.subjectId = subjectId;
            embargo.subjectCode = subjectCode;
            embargo.reportType = reportType;
            embargo.individualStatus = individualStatus;
            embargo.aggregateStatus = aggregateStatus;
            embargo.examCount = examCount;

            return embargo;
        }

        public Builder copy(final Embargo embargo) {
            districtId = embargo.districtId;
            districtName = embargo.districtName;
            schoolYear = embargo.schoolYear;
            subjectId = embargo.subjectId;
            subjectCode = embargo.subjectCode;
            reportType = embargo.reportType;
            individualStatus = embargo.individualStatus;
            aggregateStatus = embargo.aggregateStatus;
            examCount = embargo.examCount;

            return this;
        }

        public Builder districtId(final Long id) {
            this.districtId = id;
            return this;
        }

        public Builder districtName(final String name) {
            this.districtName = name;
            return this;
        }

        public Builder schoolYear(final Integer schoolYear) {
            this.schoolYear = schoolYear;
            return this;
        }

        public Builder subjectId(final Long subjectId) {
            this.subjectId = subjectId;
            return this;
        }

        public Builder subjectCode(final String subjectCode) {
            this.subjectCode = subjectCode;
            return this;
        }

        public Builder reportType(final EmbargoReportType reportType) {
            this.reportType = reportType;
            return this;
        }

        public Builder individualStatus(final EmbargoStatus status) {
            this.individualStatus = status;
            return this;
        }

        public Builder aggregateStatus(final EmbargoStatus status) {
            this.aggregateStatus = status;
            return this;
        }

        public Builder examCount(final int examCount) {
            this.examCount = examCount;
            return this;
        }
    }
}
