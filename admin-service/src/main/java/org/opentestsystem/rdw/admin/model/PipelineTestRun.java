package org.opentestsystem.rdw.admin.model;

import java.util.List;

import static org.opentestsystem.rdw.reporting.common.util.CollectionUtils.safeImmutableOf;

/**
 * Represents a pipeline test run
 */
public class PipelineTestRun {

    private PipelineTest test;
    private ScriptException scriptException;
    private PipelineTestResult result;
    private List<SchemaException> schemaExceptions;

    public PipelineTest getTest() {
        return test;
    }

    public ScriptException getScriptException() {
        return scriptException;
    }

    public PipelineTestResult getResult() {
        return result;
    }

    public List<SchemaException> getSchemaExceptions() {
        return schemaExceptions;
    }

    public static Builder builder() {
        return new Builder();
    }

    public static class Builder {
        private PipelineTest test;
        private ScriptException scriptException;
        private PipelineTestResult result;
        private List<SchemaException> schemaExceptions;

        public Builder test(final PipelineTest test) {
            this.test = test;
            return this;
        }

        public Builder scriptException(final ScriptException scriptException) {
            this.scriptException = scriptException;
            return this;
        }

        public Builder result(final PipelineTestResult result) {
            this.result = result;
            return this;
        }

        public Builder schemaExceptions(final List<SchemaException> schemaExceptions) {
            this.schemaExceptions = safeImmutableOf(schemaExceptions);
            return this;
        }

        public PipelineTestRun build() {
            final PipelineTestRun run = new PipelineTestRun();
            run.test = test;
            run.scriptException = scriptException;
            run.result = result;
            run.schemaExceptions = schemaExceptions;
            return run;
        }

    }

}
