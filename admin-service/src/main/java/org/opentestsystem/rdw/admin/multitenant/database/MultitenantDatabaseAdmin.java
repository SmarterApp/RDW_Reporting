package org.opentestsystem.rdw.admin.multitenant.database;

public interface MultitenantDatabaseAdmin {

    void createDatabase(String targetDatabase);

    void createDatabaseUser(String username, String password);

    boolean isDatabaseExists(String targetDatabase);

    boolean isDatabaseUserExists(String username);

    void grantUserToDatabase(String username, String targetDatabase);

    void createOlapDatabase(String targetDatabase);

    void createOlapSchema(String targetDatabase, String targetSchemaName);

    void createOlapUser(String targetDatabase, String targetSchemaName, String username, String password);

    boolean isOlapDatabaseExists(String targetDatabase);

    boolean isOlapSchemaExists(String targetDatabase);

    boolean isOlapDatabaseUserExists(String username);

    /**
     * Load a dataset into prepared database.  Assumes flyway migrations have completed, and
     * target tables have not been populated yet.
     *
     * @param targetDatabase database to load data into
     * @param datasetName    the dataset name to load
     * @param importDatabase the source database type
     */
    void loadDataset(String targetDatabase, String datasetName, String importDatabase);

}
