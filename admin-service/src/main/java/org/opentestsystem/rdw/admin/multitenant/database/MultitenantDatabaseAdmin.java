package org.opentestsystem.rdw.admin.multitenant.database;

public interface MultitenantDatabaseAdmin {

    void createDatabase(String targetDatabase);

    void createDatabaseUser(String username, String password);

    boolean isDatabaseExists(String targetDatabase);

    boolean isDatabaseUserExists(String username);

    void grantUserToDatabase(String username, String targetDatabase);

    void grantUserOnSelectProc(String username);

    void grantUserLoadFromS3(String username);

    void grantUserSelectIntoS3(String username);

    void createOlapSchema(String schema);

    void createOlapDatabaseUser(String username, String password);

    boolean isOlapSchemaExists(String schema);

    boolean isOlapDatabaseUserExists(String username);

    void grantAllOlapUserToSchema(String schema, String username);

    void grantAllOlapUserToSchemaTables(String schema, String username);

    void searchPathOlapUserToSchema(String schema, String username);

    /**
     * Load a dataset into prepared database.  Assumes flyway migrations have completed, and
     * target tables have not been populated yet.
     *
     * @param targetDatabase database to load data into
     * @param datasetName    the dataset name to load
     * @param importDatabase the source database type
     */
    void loadDataset(String targetDatabase, String datasetName, String importDatabase);

}
