package org.opentestsystem.rdw.admin.model;

import java.util.List;

import static org.opentestsystem.rdw.reporting.common.util.CollectionUtils.safeImmutableOf;

/**
 * Represents an ingest pipeline with a input transformation script and supporting tests
 *
 * TODO this is a pipeline "resource" not entity
 */
public class Pipeline {

    private Integer id;
    private String code;
    private String script;
    private List<PipelineTest> tests;

    public Integer getId() {
        return id;
    }

    public String getCode() {
        return code;
    }

    public String getScript() {
        return script;
    }

    public List<PipelineTest> getTests() {
        return tests;
    }

    public static Builder builder() {
        return new Builder();
    }

    public static class Builder {

        private Integer id;
        private String code;
        private String script;
        private List<PipelineTest> tests;

        public Builder id(final Integer id) {
            this.id = id;
            return this;
        }

        public Builder code(final String code) {
            this.code = code;
            return this;
        }

        public Builder script(final String script) {
            this.script = script;
            return this;
        }

        public Builder tests(final List<PipelineTest> tests) {
            this.tests = safeImmutableOf(tests);
            return this;
        }

        public Pipeline build() {
            final Pipeline pipeline = new Pipeline();
            pipeline.id = id;
            pipeline.code = code;
            pipeline.script = script;
            pipeline.tests = tests;
            return pipeline;
        }

    }

}
