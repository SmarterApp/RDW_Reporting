package org.opentestsystem.rdw.admin.model;

import org.opentestsystem.rdw.reporting.common.model.CodedEntity;

/**
 * Represents an ingest pipeline which can be thought of as an ingest pre-processor.
 * Some examples include the exam and group ingest pre-processor pipelines.
 */
public class Pipeline extends CodedEntity {

    private String inputType;
    private String activeVersion;

    public String getInputType() {
        return inputType;
    }

    public String getActiveVersion() {
        return activeVersion;
    }

    public static Builder builder() {
        return new Builder();
    }

    public Builder copy() {
        return builder().copy(this);
    }

    public static class Builder extends CodedEntity.Builder<Pipeline, Builder> {

        private String inputType;
        private String activeVersion;

        public Builder inputType(final String inputType) {
            this.inputType = inputType;
            return this;
        }

        public Builder activeVersion(final String activeVersion) {
            this.activeVersion = activeVersion;
            return this;
        }

        public Builder copy(final Pipeline pipeline) {
            return id(pipeline.getId())
                    .code(pipeline.getCode())
                    .inputType(pipeline.getInputType())
                    .activeVersion(pipeline.activeVersion);
        }

        protected Pipeline build(final Pipeline pipeline) {
            super.build(pipeline);
            pipeline.inputType = inputType;
            pipeline.activeVersion = activeVersion;
            return pipeline;
        }

        @Override
        public Pipeline build() {
            final Pipeline pipeline = new Pipeline();
            build(pipeline);
            return pipeline;
        }

    }
}
