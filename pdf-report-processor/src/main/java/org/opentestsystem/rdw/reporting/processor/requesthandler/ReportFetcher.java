package org.opentestsystem.rdw.reporting.processor.requesthandler;

import org.opentestsystem.rdw.reporting.common.report.AbstractExamReportRequest;
import org.opentestsystem.rdw.reporting.common.security.PermissionScope;
import org.opentestsystem.rdw.reporting.processor.model.StudentCompositeReport;

import java.util.List;
import java.util.Map;

/**
 * Implementations of this interface are responsible for fetching a {@link StudentCompositeReport}
 * for multiple students within the context of a Job.
 */
public interface ReportFetcher {

    /**
     * Test if this ReportFetcher instance is able to handle the given reportRequest.
     *
     * @param reportRequest A reportRequest instance
     * @return True if this fetch can handle the report request
     */
    boolean accept(AbstractExamReportRequest reportRequest);

    /**
     * Given a report request and collection of student ids, generate a StudentCompositeReport
     * for each student id.
     *
     * @param reportRequest     A report request
     * @param permissionScope   The request permission scope
     * @param studentIds        The student ids
     * @return A map of student id to composite report
     */
    Map<Long, StudentCompositeReport> fetchReports(AbstractExamReportRequest reportRequest,
                                                   PermissionScope permissionScope,
                                                   List<Long> studentIds);
}
