package org.opentestsystem.rdw.reporting.controller;

import java.util.List;
import org.opentestsystem.rdw.reporting.model.Group;
import org.springframework.hateoas.Link;
import org.springframework.hateoas.ResourceAssembler;
import org.springframework.hateoas.mvc.ResourceAssemblerSupport;

import static com.google.common.collect.Lists.newArrayList;
import static org.springframework.hateoas.mvc.ControllerLinkBuilder.linkTo;
import static org.springframework.hateoas.mvc.ControllerLinkBuilder.methodOn;

/**
 * A {@link ResourceAssembler} for {@link Group}s
 */
class GroupResourceAssembler extends ResourceAssemblerSupport<Group, GroupResource> {
    /**
     * Creates a new {@link ResourceAssemblerSupport} using the given controller class and resource type.
     */
    public GroupResourceAssembler() {
        super(GroupController.class, GroupResource.class);
    }

    @Override
    public GroupResource toResource(final Group group) {
        final List<Link> links = newArrayList();
        links.add(linkTo(methodOn(GroupController.class).getStudents(group.getId())).withRel("students"));
        return new GroupResource(group, links);
    }
}
